# 为什么要写此书？
nodejs作为新生代的web服务器，取得了巨大的成功。越来越多的前端开发人员得以触及后端开发知识领域。

普通开发者一般采用koa/express等框架，直接写js代码逻辑，即可完成nodejs服务器的开发工作。但是如果碰到了问题或者bug，就需要开发者对nodejs有一定的掌握。

市面上有很多介绍nodejs运行原理和实践应用的书籍或课程；普通的开发者掌握了这些教程，一般足以解决平常业务中碰到的问题。

如果要进阶的话，需要全盘了解nodejs的设计理念和底层原理。而目前市面上，还没有专注对nodejs源码做解读的书籍或课程。

# 为什么要通过讲故事的形式来解读源码？

nodejs是用C++开发的，另外封装了一些业务常用的js模块。

如果直接通过走读源码的方式来讲解，门槛太高，对于后端知识了解甚少的前端开发者而言，积极性会受到影响。

因此，本书决定通过引入“百货店”这个习以为常的生活场景，来对比模拟nodejs服务的运行场景，让读者在大脑中快速建立起可视化的概念。

# 百货店和nodejs服务器

百货店，是售卖日常消费品的商店；人们"进店-->买到东西-->走出商店"的过程，非常类似于一个网络请求的全部过程。

我们把百货店比作nodejs服务器，用百货店的运行来模拟nodejs服务器的运行。

为了贴切模拟服务器的运行，我们对百货店做一些规范制定。

## 百货店运行规范
我们先来想象出一家百货店，名称叫“10010百货店”。它的基本信息如下：

* 名称：10010百货店
* 地点：市经贸大厦1层105号铺
* 经营范围：日常居家消费品
* 营业时间：7*24小时（假设店里面的店员不需要休息）
* 开业时间：20xx年10月02日 00:00:00

我们需要做一些规定：
该市经贸大厦是一栋特殊的建筑，所有在这里经营的店铺，门外没有任何标识，只有门牌号（比如：105号）；大家只能通过商家事先派发的宣传单，获取到店铺的门牌号后，才能找到店铺并进来消费。


这家“10010百货店”的开张营业过程如下：
* 制作宣传单，上面标明店铺地址“市经贸大厦:105号铺”
* 打开商店大门，开始正式营业
* 客户拿到宣传单，按照“市经贸大厦:105号铺”信息，找到店铺，进店消费
* 客户付费后，离开店铺。
