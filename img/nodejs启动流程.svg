<svg id="SvgjsSvg4118" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs" width="2808.203125" height="7335.796875"><defs id="SvgjsDefs4119"><marker id="SvgjsMarker4152" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4153" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4162" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4163" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4184" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4185" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4188" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4189" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4200" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4201" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4212" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4213" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4216" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4217" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4250" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4251" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4284" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4285" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4288" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4289" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4300" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4301" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4322" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4323" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4326" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4327" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4330" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4331" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4384" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4385" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4396" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4397" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4408" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4409" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4442" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4443" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4446" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4447" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4450" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4451" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4466" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4467" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4501" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4502" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4505" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4506" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4547" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4548" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4551" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4552" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4559" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4560" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4607" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4608" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4615" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4616" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4658" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4659" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4687" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4688" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4695" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4696" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4746" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4747" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4766" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4767" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4805" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4806" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4809" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4810" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4813" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4814" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4831" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4832" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4849" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4850" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4878" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4879" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4906" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4907" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4914" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4915" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4922" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4923" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4934" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4935" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4944" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4945" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker4956" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath4957" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5024" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5025" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5038" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5039" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5054" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5055" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5101" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5102" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5126" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5127" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5134" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5135" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5142" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5143" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5150" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5151" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5177" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5178" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5207" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5208" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5235" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5236" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5290" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5291" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5294" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5295" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5298" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5299" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5306" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5307" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5314" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5315" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5335" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5336" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5339" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5340" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5343" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5344" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5351" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5352" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5379" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5380" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5393" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5394" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5432" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5433" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5444" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5445" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5458" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5459" d="M0 2L14 6L0 11L0 2 " fill="#ff0000" stroke="#ff0000" stroke-width="2"></path></marker><marker id="SvgjsMarker5462" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5463" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5470" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5471" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5484" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5485" d="M0 2L14 6L0 11L0 2 " fill="#ff0000" stroke="#ff0000" stroke-width="2"></path></marker><marker id="SvgjsMarker5510" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5511" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5532" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5533" d="M0 2L14 6L0 11L0 2 " fill="#ff3333" stroke="#ff3333" stroke-width="2"></path></marker><marker id="SvgjsMarker5554" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5555" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5582" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5583" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5586" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5587" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5590" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5591" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5618" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5619" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5622" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5623" d="M0 2L14 6L0 11L0 2 " fill="#ff0000" stroke="#ff0000" stroke-width="2"></path></marker><marker id="SvgjsMarker5630" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5631" d="M0 2L14 6L0 11L0 2 " fill="#ff0000" stroke="#ff0000" stroke-width="2"></path></marker><marker id="SvgjsMarker5634" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5635" d="M0 2L14 6L0 11L0 2 " fill="#0000ff" stroke="#0000ff" stroke-width="2"></path></marker><marker id="SvgjsMarker5642" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5643" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5666" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5667" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5670" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5671" d="M0 2L14 6L0 11L0 2 " fill="#ff0000" stroke="#ff0000" stroke-width="2"></path></marker><marker id="SvgjsMarker5684" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5685" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5688" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5689" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5712" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5713" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker5728" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath5729" d="M0 2L14 6L0 11L0 2 " fill="#323232" stroke="#323232" stroke-width="2"></path></marker></defs><g id="SvgjsG4120" transform="translate(2197.3819861418956,2952.44921875)"><path id="SvgjsPath4121" d="M18 0Q9 0 9 9L9 49.75Q9 58.75 0 58.75Q9 58.75 9 67.75L9 108.5Q9 117.5 18 117.5 " stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath4122" d="M214.47404441094886 117.5Q223.47404441094886 117.5 223.47404441094886 108.5L223.47404441094886 67.75Q223.47404441094886 58.75 232.47404441094886 58.75Q223.47404441094886 58.75 223.47404441094886 49.75L223.47404441094886 9Q223.47404441094886 0 214.47404441094886 0 " stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath4123" d="M0 0L232.47404441094886 0L232.47404441094886 117.5L0 117.5Z " stroke="none" fill="none"></path><g id="SvgjsG4124"><text id="SvgjsText4125" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="48.8" transform="rotate(0)"></text></g></g><g id="SvgjsG4126" transform="translate(1501.3480779542376,808.921875)"><path id="SvgjsPath4127" d="M18 0Q9 0 9 9L9 181.16071428571388Q9 190.16071428571388 0 190.16071428571388Q9 190.16071428571388 9 199.16071428571388L9 371.32142857142776Q9 380.32142857142776 18 380.32142857142776 " stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath4128" d="M552.4644220457624 380.32142857142776Q561.4644220457624 380.32142857142776 561.4644220457624 371.32142857142776L561.4644220457624 199.16071428571388Q561.4644220457624 190.16071428571388 570.4644220457624 190.16071428571388Q561.4644220457624 190.16071428571388 561.4644220457624 181.16071428571388L561.4644220457624 9Q561.4644220457624 0 552.4644220457624 0 " stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath4129" d="M0 0L570.4644220457624 0L570.4644220457624 380.32142857142776L0 380.32142857142776Z " stroke="none" fill="none"></path><g id="SvgjsG4130"><text id="SvgjsText4131" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="92" fill="#323232" font-weight="400" align="bottom" font-style="" opacity="1" y="362.37142857142777" transform="rotate(0)"><tspan id="SvgjsTspan4132" dy="16" x="286"><tspan id="SvgjsTspan4133" style="text-decoration:;fill: rgb(255, 51, 51);">environment.cc</tspan></tspan></text></g></g><g id="SvgjsG4134" transform="translate(1717.4571052302017,267.7945075757575)"><path id="SvgjsPath4135" d="M0 0L220 0L220 58L0 58Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4136"><text id="SvgjsText4137" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="199" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="11.05" transform="rotate(0)"><tspan id="SvgjsTspan4138" dy="16" x="110.5"><tspan id="SvgjsTspan4139" style="text-decoration:;">每个进程初始化一</tspan></tspan><tspan id="SvgjsTspan4140" dy="16" x="110.5"><tspan id="SvgjsTspan4141" style="text-decoration:;">次InitializeOncePerProcess(1024)</tspan></tspan></text></g></g><g id="SvgjsG4142" transform="translate(1954.6420454545455,266.24763257575756)"><path id="SvgjsPath4143" d="M0 0L264.9204545454545 0L264.9204545454545 56.444903581267L0 56.444903581267Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4144"><text id="SvgjsText4145" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="239" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="10.2724517906335" transform="rotate(0)"><tspan id="SvgjsTspan4146" dy="16" x="133"><tspan id="SvgjsTspan4147" style="text-decoration:;">初始化一个NodeMainInstance实例：</tspan></tspan><tspan id="SvgjsTspan4148" dy="16" x="133"><tspan id="SvgjsTspan4149" style="text-decoration:;">NodeMainInstance main_instance(1048)</tspan></tspan></text></g></g><g id="SvgjsG4150"><path id="SvgjsPath4151" d="M2017.1674638469217 128.31138370767383L2017.1674638469217 197.2795081417157L2087.1022727272734 197.2795081417157L2087.1022727272734 266.24763257575756 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4152)"></path></g><g id="SvgjsG4154" transform="translate(2269.220170454547,267.82257231404947)"><path id="SvgjsPath4155" d="M0 0L166.5 0L166.5 52.125L0 52.125Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4156"><text id="SvgjsText4157" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="146" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="16.1125" transform="rotate(0)"><tspan id="SvgjsTspan4158" dy="16" x="84"><tspan id="SvgjsTspan4159" style="text-decoration:;">main_instance.run(1054)</tspan></tspan></text></g></g><g id="SvgjsG4160"><path id="SvgjsPath4161" d="M2219.562500000001 294.470084366391L2244.391335227274 294.470084366391L2244.391335227274 293.88507231404947L2269.220170454547 293.88507231404947 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4162)"></path></g><g id="SvgjsG4164" transform="translate(2154.0906481181305,637.1822916666664)"><path id="SvgjsPath4165" d="M0 0L248 0L248 59.5L0 59.5Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4166"><text id="SvgjsText4167" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="172" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="11.8" transform="rotate(0)"><tspan id="SvgjsTspan4168" dy="16" x="124.5"><tspan id="SvgjsTspan4169" style="text-decoration:;">创建一个env:</tspan></tspan><tspan id="SvgjsTspan4170" dy="16" x="124.5"><tspan id="SvgjsTspan4171" style="text-decoration:;">CreateMainEnvironment(115)</tspan></tspan></text></g></g><g id="SvgjsG4172" transform="translate(2158.3898130089733,994.4788208692837)"><path id="SvgjsPath4173" d="M0 0L248 0L248 69.35546875L0 69.35546875Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4174"><text id="SvgjsText4175" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="146" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="8.727734375" transform="rotate(0)"><tspan id="SvgjsTspan4176" dy="16" x="124.5"><tspan id="SvgjsTspan4177" style="text-decoration:;">创建完env后，在此env下</tspan></tspan><tspan id="SvgjsTspan4178" dy="16" x="124.5"><tspan id="SvgjsTspan4179" style="text-decoration:;">加载业务代码:</tspan></tspan><tspan id="SvgjsTspan4180" dy="16" x="124.5"><tspan id="SvgjsTspan4181" style="text-decoration:;">LoadEnvironment(122)</tspan></tspan></text></g></g><g id="SvgjsG4182"><path id="SvgjsPath4183" d="M2434.5625 305.24681473829196L2464.5625 305.24681473829196L2464.5625 666.9322916666666L2402.090648118131 666.9322916666666 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4184)"></path></g><g id="SvgjsG4186"><path id="SvgjsPath4187" d="M2435.7201704545478 293.88507231404947L2477.7201704545478 293.88507231404947L2477.7201704545478 1029.1565552442837L2406.389813008974 1029.1565552442837 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4188)"></path></g><g id="SvgjsG4190" transform="translate(2159.489714878104,1298.133996212122)"><path id="SvgjsPath4191" d="M0 0L245.80019626173817 0L245.80019626173817 72.53787878787807L0 72.53787878787807Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4192"><text id="SvgjsText4193" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="184" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="18.318939393939036" transform="rotate(0)"><tspan id="SvgjsTspan4194" dy="16" x="123.5"><tspan id="SvgjsTspan4195" style="text-decoration:;">开启uv_run无限循环：</tspan></tspan><tspan id="SvgjsTspan4196" dy="16" x="123.5"><tspan id="SvgjsTspan4197" style="text-decoration:;">do {        uv_run(xx,xx);（131）</tspan></tspan></text></g></g><g id="SvgjsG4198"><path id="SvgjsPath4199" d="M2434.5862831369263 272.0415381304648L2488.5862831369263 272.0415381304648L2488.5862831369263 1334.402935606061L2405.2899111398433 1334.402935606061 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4200)"></path></g><g id="SvgjsG4202" transform="translate(1915.8125,637.0878906249998)"><path id="SvgjsPath4203" d="M0 0L199.58354855371863 0L199.58354855371863 36.08398437500023L0 36.08398437500023Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4204"><text id="SvgjsText4205" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="112" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="0.09199218750011373" transform="rotate(0)"><tspan id="SvgjsTspan4206" dy="16" x="100.5"><tspan id="SvgjsTspan4207" style="text-decoration:;">创建context:</tspan></tspan><tspan id="SvgjsTspan4208" dy="16" x="100.5"><tspan id="SvgjsTspan4209" style="text-decoration:;">Local&lt;Context&gt; context(189)</tspan></tspan></text></g></g><g id="SvgjsG4210"><path id="SvgjsPath4211" d="M2154.5625 656.921875L2134.9792742768605 656.921875L2134.9792742768605 655.1298828125001L2115.396048553721 655.1298828125001 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4212)"></path></g><g id="SvgjsG4214"><path id="SvgjsPath4215" d="M1892.9920371489766 127.48149263153718L1892.9920371489766 197.63800010364736L1827.4571052302015 197.63800010364736L1827.4571052302015 267.7945075757575 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4216)"></path></g><g id="SvgjsG4218" transform="translate(1855.2166987603553,31.921875)"><path id="SvgjsPath4219" d="M123.48368248286552 37.39532986175166L99.5836149055367 0L75.6835473282079 37.39532986175166L0 37.39532986175166L59.75016894332202 61.01343293233165L35.85010136599321 98.40876279408332L99.5836149055367 74.79065972350332L163.3171284450802 98.40876279408332L139.4170608677514 61.01343293233165L199.1672298110734 37.39532986175166Z " stroke-dasharray="3,4" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#0000ff"></path><g id="SvgjsG4220"><text id="SvgjsText4221" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="68" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="33.71460046689374" transform="rotate(0)"><tspan id="SvgjsTspan4222" dy="16" x="100.37508447166101"><tspan id="SvgjsTspan4223" style="text-decoration:;fill: rgb(255, 255, 255);font-weight: bold;">启动</tspan></tspan><tspan id="SvgjsTspan4224" dy="16" x="100.37508447166101"><tspan id="SvgjsTspan4225" style="text-decoration:;fill: rgb(255, 255, 255);font-weight: bold;">Start(1023)</tspan></tspan></text></g></g><g id="SvgjsG4226" transform="translate(2535.0170454545478,80.74763257575759)"><path id="SvgjsPath4227" d="M0 266.875Q9 266.875 9 257.875L9 142.4375Q9 133.4375 22 133.4375Q9 133.4375 9 124.4375L9 9Q9 0 0 0 " stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath4228" d="M0 0L103.125 0L103.125 266.875L0 266.875Z " stroke="none" fill="none"></path><g id="SvgjsG4229"><text id="SvgjsText4230" font-family="微软雅黑" text-anchor="start" font-size="13px" width="47" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="123.4875" transform="rotate(0)"><tspan id="SvgjsTspan4231" dy="16" x="27"><tspan id="SvgjsTspan4232" style="text-decoration:;fill: rgb(255, 51, 51);">node.cc</tspan></tspan></text></g></g><g id="SvgjsG4233" transform="translate(2532.0625,600.3612689393935)"><path id="SvgjsPath4234" d="M0 586.5606060606065Q9 586.5606060606065 9 577.5606060606065L9 302.28030303030323Q9 293.28030303030323 22 293.28030303030323Q9 293.28030303030323 9 284.28030303030323L9 9Q9 0 0 0 " stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath4235" d="M0 0L193.75 0L193.75 586.5606060606065L0 586.5606060606065Z " stroke="none" fill="none"></path><g id="SvgjsG4236"><text id="SvgjsText4237" font-family="微软雅黑" text-anchor="start" font-size="13px" width="140" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="283.33030303030324" transform="rotate(0)"><tspan id="SvgjsTspan4238" dy="16" x="27"><tspan id="SvgjsTspan4239" style="text-decoration:;fill: rgb(255, 51, 51);">node_main_instance.cc</tspan></tspan></text></g></g><g id="SvgjsG4240" transform="translate(1819.2289514462814,720.1824174649788)"><path id="SvgjsPath4241" d="M0 0L176.66709710743726 0L176.66709710743726 48.73945753502119L0 48.73945753502119Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4242"><text id="SvgjsText4243" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="148" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="6.419728767510594" transform="rotate(0)"><tspan id="SvgjsTspan4244" dy="16" x="89"><tspan id="SvgjsTspan4245" style="text-decoration:;">真正开始创建env:</tspan></tspan><tspan id="SvgjsTspan4246" dy="16" x="89"><tspan id="SvgjsTspan4247" style="text-decoration:;">CreateEnvironment(203)</tspan></tspan></text></g></g><g id="SvgjsG4248"><path id="SvgjsPath4249" d="M2154.555600218824 691.5461324259029L1907.5625000000002 691.5461324259029L1907.5625000000002 720.1824174649788 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4250)"></path><rect id="SvgjsRect4252" width="86" height="96" x="2012.7583601312945" y="695.5461324259029" fill="#ffffff"></rect><text id="SvgjsText4253" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="86" fill="#323232" font-weight="400" align="top" font-style="" opacity="1" y="693.5961324259029" transform="rotate(0)"><tspan id="SvgjsTspan4254" dy="16" x="2055.7583601312945"><tspan id="SvgjsTspan4255" style="text-decoration:;">参数：</tspan></tspan><tspan id="SvgjsTspan4256" dy="16" x="2055.7583601312945"><tspan id="SvgjsTspan4257" style="text-decoration:;">isolate_data，</tspan></tspan><tspan id="SvgjsTspan4258" dy="16" x="2055.7583601312945"><tspan id="SvgjsTspan4259" style="text-decoration:;">context,</tspan></tspan><tspan id="SvgjsTspan4260" dy="16" x="2055.7583601312945"><tspan id="SvgjsTspan4261" style="text-decoration:;">args,</tspan></tspan><tspan id="SvgjsTspan4262" dy="16" x="2055.7583601312945"><tspan id="SvgjsTspan4263" style="text-decoration:;">exec_args,</tspan></tspan><tspan id="SvgjsTspan4264" dy="16" x="2055.7583601312945"><tspan id="SvgjsTspan4265" style="text-decoration:;">flags</tspan></tspan></text></g><g id="SvgjsG4266" transform="translate(1551.5756441168119,832.0281723484865)"><path id="SvgjsPath4267" d="M0 0L202.6845456319635 0L202.6845456319635 66.14370265151354L0 66.14370265151354Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4268"><text id="SvgjsText4269" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="172" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="15.121851325756769" transform="rotate(0)"><tspan id="SvgjsTspan4270" dy="16" x="102"><tspan id="SvgjsTspan4271" style="text-decoration:;">初始化一个env:</tspan></tspan><tspan id="SvgjsTspan4272" dy="16" x="102"><tspan id="SvgjsTspan4273" style="text-decoration:;">env = new Environment(370)</tspan></tspan></text></g></g><g id="SvgjsG4274" transform="translate(1551.5756441168119,908.973559378508)"><path id="SvgjsPath4275" d="M0 0L198.6582573983394 0L198.6582573983394 60.19831562149204L0 60.19831562149204Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4276"><text id="SvgjsText4277" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="175" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="12.149157810746022" transform="rotate(0)"><tspan id="SvgjsTspan4278" dy="16" x="100"><tspan id="SvgjsTspan4279" style="text-decoration:;">执行bootstrap:</tspan></tspan><tspan id="SvgjsTspan4280" dy="16" x="100"><tspan id="SvgjsTspan4281" style="text-decoration:;">env-&gt;RunBootstrapping(391)</tspan></tspan></text></g></g><g id="SvgjsG4282"><path id="SvgjsPath4283" d="M1819.2289514462814 744.5521462324893L1786.7445705975285 744.5521462324893L1786.7445705975285 865.1000236742432L1754.2601897487757 865.1000236742432 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4284)"></path></g><g id="SvgjsG4286"><path id="SvgjsPath4287" d="M1820.1759972884752 758.3173253527374L1802.2049494018133 758.3173253527374L1802.2049494018133 939.072717189254L1750.2339015151515 939.072717189254 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4288)"></path></g><g id="SvgjsG4290" transform="translate(1448.3125,257.879175275482)"><path id="SvgjsPath4291" d="M0 0L247.5 0L247.5 72.01179407713494L0 72.01179407713494Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4292"><text id="SvgjsText4293" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="223" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="18.05589703856747" transform="rotate(0)"><tspan id="SvgjsTspan4294" dy="16" x="124.5"><tspan id="SvgjsTspan4295" style="text-decoration:;">执行bootstrap:</tspan></tspan><tspan id="SvgjsTspan4296" dy="16" x="124.5"><tspan id="SvgjsTspan4297" style="text-decoration:;">Environment::RunBootstrapping(343)</tspan></tspan></text></g></g><g id="SvgjsG4298"><path id="SvgjsPath4299" d="M1551.5756441168119 939.072717189254L1530.5756441168119 939.072717189254L1530.5756441168119 359.8909693526173L1572.0625000000007 359.8909693526173L1572.0625000000007 329.8909693526173 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4300)"></path></g><g id="SvgjsG4302" transform="translate(1210.4014486288506,150.97940835705762)"><path id="SvgjsPath4303" d="M0 0L181.8181818181818 0L181.8181818181818 68.63636363636363L0 68.63636363636363Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4304"><text id="SvgjsText4305" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="157" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="8.368181818181814" transform="rotate(0)"><tspan id="SvgjsTspan4306" dy="16" x="91.5"><tspan id="SvgjsTspan4307" style="text-decoration:;">准备loaders:</tspan></tspan><tspan id="SvgjsTspan4308" dy="16" x="91.5"><tspan id="SvgjsTspan4309" style="text-decoration:;">BootstrapInternalLoaders(</tspan></tspan><tspan id="SvgjsTspan4310" dy="16" x="91.5"><tspan id="SvgjsTspan4311" style="text-decoration:;">348)</tspan></tspan></text></g></g><g id="SvgjsG4312" transform="translate(1225.097181725735,399.4968793044077)"><path id="SvgjsPath4313" d="M0 0L167.182569496619 0L167.182569496619 60.454545454546064L0 60.454545454546064Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4314"><text id="SvgjsText4315" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="123" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="12.277272727273033" transform="rotate(0)"><tspan id="SvgjsTspan4316" dy="16" x="84.5"><tspan id="SvgjsTspan4317" style="text-decoration:;">准备node.js相关：</tspan></tspan><tspan id="SvgjsTspan4318" dy="16" x="84.5"><tspan id="SvgjsTspan4319" style="text-decoration:;">BootstrapNode(353)</tspan></tspan></text></g></g><g id="SvgjsG4320"><path id="SvgjsPath4321" d="M1448.3125 293.8850723140497L1420.2660652235163 293.8850723140497L1420.2660652235163 185.29759017523943L1392.2196304470328 185.29759017523943 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4322)"></path></g><g id="SvgjsG4324"><path id="SvgjsPath4325" d="M1448.3125 317.3671790783329L1419.7791727061172 317.3671790783329L1419.7791727061172 440.73408580651517L1391.2458454122343 440.73408580651517 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4326)"></path></g><g id="SvgjsG4328"><path id="SvgjsPath4329" d="M1210.4014486288506 185.29759017523943L1174.981974314427 185.29759017523943L1174.981974314427 186.17330535047887L1139.5625000000032 186.17330535047887 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4330)"></path></g><g id="SvgjsG4332" transform="translate(715.3125000000032,62.67330535047887)"><path id="SvgjsPath4333" d="M0 0L424.25 0L424.25 247L0 247Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4334"><text id="SvgjsText4335" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="368" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="33.55" transform="rotate(0)"><tspan id="SvgjsTspan4336" dy="16" x="213"><tspan id="SvgjsTspan4337" style="text-decoration:;">准备形参和实参：</tspan></tspan><tspan id="SvgjsTspan4338" dy="16" x="213"><tspan id="SvgjsTspan4339" style="text-decoration:;">std::vector&lt;Local&lt;String&gt;&gt; loaders_params = {      </tspan></tspan><tspan id="SvgjsTspan4340" dy="16" x="213"><tspan id="SvgjsTspan4341" style="text-decoration:;">process_string(),      FIXED_ONE_BYTE_STRING(isolate_, </tspan></tspan><tspan id="SvgjsTspan4342" dy="16" x="213"><tspan id="SvgjsTspan4343" style="text-decoration:;">"getLinkedBinding"),      FIXED_ONE_BYTE_STRING(isolate_, </tspan></tspan><tspan id="SvgjsTspan4344" dy="16" x="213"><tspan id="SvgjsTspan4345" style="text-decoration:;">"getInternalBinding"),      primordials_string()};  </tspan></tspan><tspan id="SvgjsTspan4346" dy="16" x="213"><tspan id="SvgjsTspan4347" style="text-decoration:;">std::vector&lt;Local&lt;Value&gt;&gt; loaders_args = {      process_object(),      </tspan></tspan><tspan id="SvgjsTspan4348" dy="16" x="213"><tspan id="SvgjsTspan4349" style="text-decoration:;">NewFunctionTemplate(binding::GetLinkedBinding)          -</tspan></tspan><tspan id="SvgjsTspan4350" dy="16" x="213"><tspan id="SvgjsTspan4351" style="text-decoration:;">&gt;GetFunction(context())          .ToLocalChecked(),      </tspan></tspan><tspan id="SvgjsTspan4352" dy="16" x="213"><tspan id="SvgjsTspan4353" style="text-decoration:;">NewFunctionTemplate(binding::GetInternalBinding)          -</tspan></tspan><tspan id="SvgjsTspan4354" dy="16" x="213"><tspan id="SvgjsTspan4355" style="text-decoration:;">&gt;GetFunction(context())          .ToLocalChecked(),      </tspan></tspan><tspan id="SvgjsTspan4356" dy="16" x="213"><tspan id="SvgjsTspan4357" style="text-decoration:;">primordials()}; （247）</tspan></tspan></text></g></g><g id="SvgjsG4358" transform="translate(2615.8125,25.00513300619832)"><path id="SvgjsPath4359" d="M0 0L100 0L100 70L0 70Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4360"><text id="SvgjsText4361" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="66" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="17.05" transform="rotate(0)"><tspan id="SvgjsTspan4362" dy="16" x="50.5"><tspan id="SvgjsTspan4363" style="text-decoration:;fill: rgb(255, 51, 51);">基于nodejs </tspan></tspan><tspan id="SvgjsTspan4364" dy="16" x="50.5"><tspan id="SvgjsTspan4365" style="text-decoration:;fill: rgb(255, 51, 51);text-decoration: underline;">V14解读</tspan></tspan></text></g></g><g id="SvgjsG4366" transform="translate(719.0625,338.9837871793219)"><path id="SvgjsPath4367" d="M0 0L421.75 0L421.75 181.79924242424238L0 181.79924242424238Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4368"><text id="SvgjsText4369" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="329" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="40.94962121212119" transform="rotate(0)"><tspan id="SvgjsTspan4370" dy="16" x="211.5"><tspan id="SvgjsTspan4371" style="text-decoration:;">准备形参和实参：</tspan></tspan><tspan id="SvgjsTspan4372" dy="16" x="211.5"><tspan id="SvgjsTspan4373" style="text-decoration:;">std::vector&lt;Local&lt;String&gt;&gt; node_params = {      process_string(),      </tspan></tspan><tspan id="SvgjsTspan4374" dy="16" x="211.5"><tspan id="SvgjsTspan4375" style="text-decoration:;">require_string(),      internal_binding_string(),      </tspan></tspan><tspan id="SvgjsTspan4376" dy="16" x="211.5"><tspan id="SvgjsTspan4377" style="text-decoration:;">primordials_string()};  std::vector&lt;Local&lt;Value&gt;&gt; node_args = {      </tspan></tspan><tspan id="SvgjsTspan4378" dy="16" x="211.5"><tspan id="SvgjsTspan4379" style="text-decoration:;">process_object(),      native_module_require(),      </tspan></tspan><tspan id="SvgjsTspan4380" dy="16" x="211.5"><tspan id="SvgjsTspan4381" style="text-decoration:;">internal_binding_loader(),      primordials()};（293）</tspan></tspan></text></g></g><g id="SvgjsG4382"><path id="SvgjsPath4383" d="M1225.097181725735 429.7241520316808L1182.9548408628675 429.7241520316808L1182.9548408628675 429.8834083914431L1140.8125 429.8834083914431 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4384)"></path></g><g id="SvgjsG4386" transform="translate(1750.2339015151513,990.0315552442837)"><path id="SvgjsPath4387" d="M0 0L276.5785984848487 0L276.5785984848487 78.25L0 78.25Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4388"><text id="SvgjsText4389" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="233" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="21.175" transform="rotate(0)"><tspan id="SvgjsTspan4390" dy="16" x="139"><tspan id="SvgjsTspan4391" style="text-decoration:;">开始执行业务逻辑：</tspan></tspan><tspan id="SvgjsTspan4392" dy="16" x="139"><tspan id="SvgjsTspan4393" style="text-decoration:;">return StartExecution(env, cb);（447）</tspan></tspan></text></g></g><g id="SvgjsG4394"><path id="SvgjsPath4395" d="M2158.3898130089733 1029.1565552442837L2092.6011565044864 1029.1565552442837L2092.6011565044864 1029.1565552442837L2026.8125 1029.1565552442837 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4396)"></path></g><g id="SvgjsG4398" transform="translate(712.84375,558.796875)"><path id="SvgjsPath4399" d="M0 0L455 0L455 94.375L0 94.375Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4400"><text id="SvgjsText4401" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="422" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="29.2375" transform="rotate(0)"><tspan id="SvgjsTspan4402" dy="16" x="228"><tspan id="SvgjsTspan4403" style="text-decoration:;">加载启动的业务代码：</tspan></tspan><tspan id="SvgjsTspan4404" dy="16" x="228"><tspan id="SvgjsTspan4405" style="text-decoration:;">return StartExecution(env, "internal/main/run_main_module");（460）</tspan></tspan></text></g></g><g id="SvgjsG4406"><path id="SvgjsPath4407" d="M1750.2339015151513 1029.1565552442837L1459.0388257575755 1029.1565552442837L1459.0388257575755 605.984375L1167.84375 605.984375 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4408)"></path></g><g id="SvgjsG4410" transform="translate(209.25,67.50876653161589)"><path id="SvgjsPath4411" d="M0 0L476.25 0L476.25 99.41310846838411L0 99.41310846838411Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4412"><text id="SvgjsText4413" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="410" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="15.756554234192055" transform="rotate(0)"><tspan id="SvgjsTspan4414" dy="16" x="239"><tspan id="SvgjsTspan4415" style="text-decoration:;">调用通用的执行器：</tspan></tspan><tspan id="SvgjsTspan4416" dy="16" x="239"><tspan id="SvgjsTspan4417" style="text-decoration:;">ExecuteBootstrapper(           this, "internal/bootstrap/loaders", </tspan></tspan><tspan id="SvgjsTspan4418" dy="16" x="239"><tspan id="SvgjsTspan4419" style="text-decoration:;">&amp;loaders_params, &amp;loaders_args)           .ToLocal(&amp;loader_exports)</tspan></tspan><tspan id="SvgjsTspan4420" dy="16" x="239"><tspan id="SvgjsTspan4421" style="text-decoration:;">（264）</tspan></tspan></text></g></g><g id="SvgjsG4422" transform="translate(207.21875,379.1021282288656)"><path id="SvgjsPath4423" d="M0 0L480.3125 0L480.3125 102.01561732528626L0 102.01561732528626Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4424"><text id="SvgjsText4425" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="421" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="25.05780866264313" transform="rotate(0)"><tspan id="SvgjsTspan4426" dy="16" x="241"><tspan id="SvgjsTspan4427" style="text-decoration:;">调用通用的执行器：</tspan></tspan><tspan id="SvgjsTspan4428" dy="16" x="241"><tspan id="SvgjsTspan4429" style="text-decoration:;">ExecuteBootstrapper(</tspan></tspan><tspan id="SvgjsTspan4430" dy="16" x="241"><tspan id="SvgjsTspan4431" style="text-decoration:;">this, "internal/bootstrap/node", &amp;node_params, &amp;node_args);（304）</tspan></tspan></text></g></g><g id="SvgjsG4432" transform="translate(206.4375,534.421875)"><path id="SvgjsPath4433" d="M0 0L481.875 0L481.875 98.75L0 98.75Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4434"><text id="SvgjsText4435" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="459" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="31.425" transform="rotate(0)"><tspan id="SvgjsTspan4436" dy="16" x="241.5"><tspan id="SvgjsTspan4437" style="text-decoration:;">准备形参和实参，调用通用执行器：ExecuteBootstrapper(env, main_script_id, </tspan></tspan><tspan id="SvgjsTspan4438" dy="16" x="241.5"><tspan id="SvgjsTspan4439" style="text-decoration:;">¶meters, &amp;arguments)（397）</tspan></tspan></text></g></g><g id="SvgjsG4440"><path id="SvgjsPath4441" d="M715.3125000000032 186.17330535047887L700.4062500000016 186.17330535047887L700.4062500000016 117.21532076580795L685.5 117.21532076580795 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4442)"></path></g><g id="SvgjsG4444"><path id="SvgjsPath4445" d="M719.0625 429.8834083914431L703.296875 429.8834083914431L703.296875 430.1099368915087L687.53125 430.1099368915087 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4446)"></path></g><g id="SvgjsG4448"><path id="SvgjsPath4449" d="M712.84375 605.984375L700.578125 605.984375L700.578125 583.796875L688.3125 583.796875 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4450)"></path></g><g id="SvgjsG4452" transform="translate(207.0625,184.421875)"><path id="SvgjsPath4453" d="M0 0L480.625 0L480.625 91.25L0 91.25Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4454"><text id="SvgjsText4455" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="378" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="11.675" transform="rotate(0)"><tspan id="SvgjsTspan4456" dy="16" x="241"><tspan id="SvgjsTspan4457" style="text-decoration:;">将上一步执行的loaders.js导出的属性保存起来，供后续使用：</tspan></tspan><tspan id="SvgjsTspan4458" dy="16" x="241"><tspan id="SvgjsTspan4459" style="text-decoration:;">set_internal_binding_loader(internal_binding_loader.As&lt;Function&gt;());(275);</tspan></tspan><tspan id="SvgjsTspan4460" dy="16" x="241"><tspan id="SvgjsTspan4461" style="text-decoration:;">set_native_module_require(require.As&lt;Function&gt;());（279）</tspan></tspan><tspan id="SvgjsTspan4462" dy="16" x="241"><tspan id="SvgjsTspan4463" style="text-decoration:;"> </tspan></tspan></text></g></g><g id="SvgjsG4464"><path id="SvgjsPath4465" d="M715.8125000000032 212.42330535047887L701.7500000000016 212.42330535047887L701.7500000000016 230.046875L687.6875 230.046875 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4466)"></path></g><g id="SvgjsG4468" transform="translate(330.8125,253.59462164256183)"><path id="SvgjsPath4469" d="M38.55 46.375C-32.125 33.125 12.85 23.1875 28.912499999999998 19.875C22.4875 3.3125 102.8 0 134.92499999999998 6.625C160.625 -3.3125 240.9375 0 240.9375 9.9375C305.1875 6.625 330.8875 19.875 305.1875 36.4375C327.675 49.6875 305.1875 66.25 231.29999999999998 59.625C215.2375 68.2375 150.98749999999998 68.2375 134.92499999999998 59.625C102.8 66.25 38.55 62.9375 38.55 46.375Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4470"><text id="SvgjsText4471" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="301" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="15.175" transform="rotate(0)"><tspan id="SvgjsTspan4472" dy="16" x="161.5"><tspan id="SvgjsTspan4473" style="text-decoration:;">loaders.js中的internalBinding函数会维持一个js世界</tspan></tspan><tspan id="SvgjsTspan4474" dy="16" x="161.5"><tspan id="SvgjsTspan4475" style="text-decoration:;">的缓存，然后export出来给别的模块使用</tspan></tspan></text></g></g><g id="SvgjsG4476" transform="translate(2129.5646925290794,1425.130918560606)"><path id="SvgjsPath4477" d="M0 0L305 0L305 75L0 75Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4478"><text id="SvgjsText4479" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="274" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="19.55" transform="rotate(0)"><tspan id="SvgjsTspan4480" dy="16" x="153"><tspan id="SvgjsTspan4481" style="text-decoration:;">执行经典的六大步检测，其中最重要的是io poll:</tspan></tspan><tspan id="SvgjsTspan4482" dy="16" x="153"><tspan id="SvgjsTspan4483" style="text-decoration:;">uv__io_poll(loop, timeout);(381)</tspan></tspan></text></g></g><g id="SvgjsG4484" transform="translate(2115.961159669746,1580.2552083333333)"><path id="SvgjsPath4485" d="M0 0L332.0653409090937 0L332.0653409090937 81.25L0 81.25Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4486"><text id="SvgjsText4487" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="264" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="22.675" transform="rotate(0)"><tspan id="SvgjsTspan4488" dy="16" x="167"><tspan id="SvgjsTspan4489" style="text-decoration:;">以linux为例，进入经典的epoll，并调用毁掉：</tspan></tspan><tspan id="SvgjsTspan4490" dy="16" x="167"><tspan id="SvgjsTspan4491" style="text-decoration:;">w-&gt;cb(loop, w, pe-&gt;events);（431）</tspan></tspan></text></g></g><g id="SvgjsG4492" transform="translate(2530.384588068184,1378.171875)"><path id="SvgjsPath4493" d="M0 140Q9 140 9 131L9 79Q9 70 22 70Q9 70 9 61L9 9Q9 0 0 0 " stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath4494" d="M0 0L100 0L100 140L0 140Z " stroke="none" fill="none"></path><g id="SvgjsG4495"><text id="SvgjsText4496" font-family="微软雅黑" text-anchor="start" font-size="13px" width="44" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="60.05" transform="rotate(0)"><tspan id="SvgjsTspan4497" dy="16" x="27"><tspan id="SvgjsTspan4498" style="text-decoration:;fill: rgb(255, 51, 51);">core.cc</tspan></tspan></text></g></g><g id="SvgjsG4499"><path id="SvgjsPath4500" d="M2282.3898130089733 1370.671875L2282.3898130089733 1397.901396780303L2282.0646925290794 1397.901396780303L2282.0646925290794 1425.130918560606 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4501)"></path></g><g id="SvgjsG4503"><path id="SvgjsPath4504" d="M2282.0646925290794 1500.130918560606L2282.0646925290794 1540.1930634469695L2281.993830124293 1540.1930634469695L2281.993830124293 1580.2552083333333 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4505)"></path></g><g id="SvgjsG4507" transform="translate(2530.1526100852298,1565.671875)"><path id="SvgjsPath4508" d="M0 143.5Q9 143.5 9 134.5L9 80.75Q9 71.75 22 71.75Q9 71.75 9 62.75L9 9Q9 0 0 0 " stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath4509" d="M0 0L138.15988991477025 0L138.15988991477025 143.5L0 143.5Z " stroke="none" fill="none"></path><g id="SvgjsG4510"><text id="SvgjsText4511" font-family="微软雅黑" text-anchor="start" font-size="13px" width="73" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="61.8" transform="rotate(0)"><tspan id="SvgjsTspan4512" dy="16" x="27"><tspan id="SvgjsTspan4513" style="text-decoration:;fill: rgb(255, 51, 51);">linux-core.c</tspan></tspan></text></g></g><g id="SvgjsG4514" transform="translate(1575.693595608052,1816.609375)"><path id="SvgjsPath4515" d="M0 0L324.9456756538393 0L324.9456756538393 65L0 65Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4516"><text id="SvgjsText4517" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="282" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="14.55" transform="rotate(0)"><tspan id="SvgjsTspan4518" dy="16" x="163"><tspan id="SvgjsTspan4519" style="text-decoration:;">w-&gt;cb即为uv__server_io,创建新的connection：</tspan></tspan><tspan id="SvgjsTspan4520" dy="16" x="163"><tspan id="SvgjsTspan4521" style="text-decoration:;">stream-&gt;connection_cb(stream, err);（564）</tspan></tspan></text></g></g><g id="SvgjsG4522" transform="translate(2530.1526100852298,1729.421875)"><path id="SvgjsPath4523" d="M0 397.5Q9 397.5 9 388.5L9 207.75Q9 198.75 22 198.75Q9 198.75 9 189.75L9 9Q9 0 0 0 " stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath4524" d="M0 0L100 0L100 397.5L0 397.5Z " stroke="none" fill="none"></path><g id="SvgjsG4525"><text id="SvgjsText4526" font-family="微软雅黑" text-anchor="start" font-size="13px" width="52" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="188.8" transform="rotate(0)"><tspan id="SvgjsTspan4527" dy="16" x="27"><tspan id="SvgjsTspan4528" style="text-decoration:;fill: rgb(255, 51, 51);">stream.c</tspan></tspan></text></g></g><g id="SvgjsG4529" transform="translate(2111.227294075271,1828.09375)"><path id="SvgjsPath4530" d="M0 0L342.8502035000952 0L342.8502035000952 67.03125L0 67.03125Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4531"><text id="SvgjsText4532" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="283" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="15.565625" transform="rotate(0)"><tspan id="SvgjsTspan4533" dy="16" x="172"><tspan id="SvgjsTspan4534" style="text-decoration:;">w-&gt;cb即为uv__stream_io,开始消费steam上的数</tspan></tspan><tspan id="SvgjsTspan4535" dy="16" x="172"><tspan id="SvgjsTspan4536" style="text-decoration:;">据：uv__read(stream);（1306）</tspan></tspan></text></g></g><g id="SvgjsG4537" transform="translate(2178.1751602485856,1701.921875)"><path id="SvgjsPath4538" d="M0 39.5L103.8186698757072 0L207.6373397514144 39.5L103.8186698757072 79Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4539"><text id="SvgjsText4540" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="188" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="21.945" transform="rotate(0)"><tspan id="SvgjsTspan4541" dy="16" x="104.5"><tspan id="SvgjsTspan4542" style="text-decoration:;">epoll wait拿到的是否为初次客户</tspan></tspan><tspan id="SvgjsTspan4543" dy="16" x="104.5"><tspan id="SvgjsTspan4544" style="text-decoration:;">端连接</tspan></tspan></text></g></g><g id="SvgjsG4545"><path id="SvgjsPath4546" d="M2281.993830124293 1661.5052083333333L2281.993830124293 1681.7135416666665L2281.993830124293 1681.7135416666665L2281.993830124293 1701.921875 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4547)"></path></g><g id="SvgjsG4549"><path id="SvgjsPath4550" d="M2281.993830124293 1780.921875L2281.993830124293 1804.5078125L2282.652395825319 1804.5078125L2282.652395825319 1828.09375 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4551)"></path><rect id="SvgjsRect4553" width="13" height="16" x="2275.823112974806" y="1796.5078125" fill="#ffffff"></rect><text id="SvgjsText4554" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="13" fill="#323232" font-weight="400" align="top" font-style="" opacity="1" y="1794.5578125" transform="rotate(0)"><tspan id="SvgjsTspan4555" dy="16" x="2282.323112974806"><tspan id="SvgjsTspan4556" style="text-decoration:;">否</tspan></tspan></text></g><g id="SvgjsG4557"><path id="SvgjsPath4558" d="M2178.1751602485856 1741.421875L1738.1664334349716 1741.421875L1738.1664334349716 1816.609375 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4559)"></path><rect id="SvgjsRect4561" width="13" height="16" x="1914.0770468417786" y="1733.421875" fill="#ffffff"></rect><text id="SvgjsText4562" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="13" fill="#323232" font-weight="400" align="top" font-style="" opacity="1" y="1731.471875" transform="rotate(0)"><tspan id="SvgjsTspan4563" dy="16" x="1920.5770468417786"><tspan id="SvgjsTspan4564" style="text-decoration:;">是</tspan></tspan></text></g><g id="SvgjsG4565" transform="translate(1934.5625,1964.109375)"><path id="SvgjsPath4566" d="M0 0L295.0622773064615 0L295.0622773064615 156.5625L0 156.5625Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4567"><text id="SvgjsText4568" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="276" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="12.33125" transform="rotate(0)"><tspan id="SvgjsTspan4569" dy="16" x="148.5"><tspan id="SvgjsTspan4570" style="text-decoration:;">分配一个buf,并读取1024*64大小的数据到此buf</tspan></tspan><tspan id="SvgjsTspan4571" dy="16" x="148.5"><tspan id="SvgjsTspan4572" style="text-decoration:;">中:</tspan></tspan><tspan id="SvgjsTspan4573" dy="16" x="148.5"><tspan id="SvgjsTspan4574" style="text-decoration:;">buf = uv_buf_init(NULL, 0);    stream-</tspan></tspan><tspan id="SvgjsTspan4575" dy="16" x="148.5"><tspan id="SvgjsTspan4576" style="text-decoration:;">&gt;alloc_cb((uv_handle_t*)stream, 64 * 1024, </tspan></tspan><tspan id="SvgjsTspan4577" dy="16" x="148.5"><tspan id="SvgjsTspan4578" style="text-decoration:;">&amp;buf);</tspan></tspan><tspan id="SvgjsTspan4579" dy="16" x="148.5"><tspan id="SvgjsTspan4580" style="text-decoration:;">do { </tspan></tspan><tspan id="SvgjsTspan4581" dy="16" x="148.5"><tspan id="SvgjsTspan4582" style="text-decoration:;">       </tspan></tspan><tspan id="SvgjsTspan4583" dy="16" x="148.5"><tspan id="SvgjsTspan4584" style="text-decoration:;">nread = read(uv__stream_fd(stream), </tspan></tspan><tspan id="SvgjsTspan4585" dy="16" x="148.5"><tspan id="SvgjsTspan4586" style="text-decoration:;">buf.base, buf.len); </tspan></tspan><tspan id="SvgjsTspan4587" dy="16" x="148.5"><tspan id="SvgjsTspan4588" style="text-decoration:;">     </tspan></tspan><tspan id="SvgjsTspan4589" dy="16" x="148.5"><tspan id="SvgjsTspan4590" style="text-decoration:;">}</tspan></tspan><tspan id="SvgjsTspan4591" dy="16" x="148.5"><tspan id="SvgjsTspan4592" style="text-decoration:;">（1142）</tspan></tspan></text></g></g><g id="SvgjsG4593" transform="translate(2242.0625,1967.625)"><path id="SvgjsPath4594" d="M0 0L266.25 0L266.25 149.53125L0 149.53125Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4595"><text id="SvgjsText4596" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="238" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="40.815625" transform="rotate(0)"><tspan id="SvgjsTspan4597" dy="16" x="134"><tspan id="SvgjsTspan4598" style="text-decoration:;">read完毕后，调用read回调--read_cb:</tspan></tspan><tspan id="SvgjsTspan4599" dy="16" x="134"><tspan id="SvgjsTspan4600" style="text-decoration:;">stream-&gt;read_cb(stream, nread, &amp;buf);</tspan></tspan><tspan id="SvgjsTspan4601" dy="16" x="134"><tspan id="SvgjsTspan4602" style="text-decoration:;">（）</tspan></tspan><tspan id="SvgjsTspan4603" dy="16" x="134"><tspan id="SvgjsTspan4604" style="text-decoration:;">注意：此处的read_cb就是：OnUvRead</tspan></tspan></text></g></g><g id="SvgjsG4605"><path id="SvgjsPath4606" d="M2282.6523958253183 1895.125L2282.6523958253183 1929.6171875L2082.0936386532308 1929.6171875L2082.0936386532308 1964.109375 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4607)"></path><rect id="SvgjsRect4609" width="36" height="16" x="2164.3730172392743" y="1921.6171875" fill="#ffffff"></rect><text id="SvgjsText4610" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="36" fill="#323232" font-weight="400" align="top" font-style="" opacity="1" y="1919.6671875" transform="rotate(0)"><tspan id="SvgjsTspan4611" dy="16" x="2182.3730172392743"><tspan id="SvgjsTspan4612" style="text-decoration:;">Step1:</tspan></tspan></text></g><g id="SvgjsG4613"><path id="SvgjsPath4614" d="M2334.5625 1894.421875L2334.5625 1931.0234375L2375.1875 1931.0234375L2375.1875 1967.625 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4615)"></path><rect id="SvgjsRect4617" width="39" height="16" x="2335.375" y="1923.0234375" fill="#ffffff"></rect><text id="SvgjsText4618" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="39" fill="#323232" font-weight="400" align="top" font-style="" opacity="1" y="1921.0734375" transform="rotate(0)"><tspan id="SvgjsTspan4619" dy="16" x="2354.875"><tspan id="SvgjsTspan4620" style="text-decoration:;">Step:2</tspan></tspan></text></g><g id="SvgjsG4621" transform="translate(1934.5625,2166.609375)"><path id="SvgjsPath4622" d="M0 0L579.8941145491235 0L579.8941145491235 139.0625L0 139.0625Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4623"><text id="SvgjsText4624" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="421" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="35.58125" transform="rotate(0)"><tspan id="SvgjsTspan4625" dy="16" x="290.5"><tspan id="SvgjsTspan4626" style="text-decoration:;">将数据触发出去：</tspan></tspan><tspan id="SvgjsTspan4627" dy="16" x="290.5"><tspan id="SvgjsTspan4628" style="text-decoration:;">void StreamResource::EmitRead(ssize_t nread, const uv_buf_t&amp; buf) { </tspan></tspan><tspan id="SvgjsTspan4629" dy="16" x="290.5"><tspan id="SvgjsTspan4630" style="text-decoration:;"> </tspan></tspan><tspan id="SvgjsTspan4631" dy="16" x="290.5"><tspan id="SvgjsTspan4632" style="text-decoration:;">DebugSealHandleScope handle_scope(v8::Isolate::GetCurrent()); </tspan></tspan><tspan id="SvgjsTspan4633" dy="16" x="290.5"><tspan id="SvgjsTspan4634" style="text-decoration:;"> </tspan></tspan><tspan id="SvgjsTspan4635" dy="16" x="290.5"><tspan id="SvgjsTspan4636" style="text-decoration:;">if (nread &gt; 0) </tspan></tspan><tspan id="SvgjsTspan4637" dy="16" x="290.5"><tspan id="SvgjsTspan4638" style="text-decoration:;">   </tspan></tspan><tspan id="SvgjsTspan4639" dy="16" x="290.5"><tspan id="SvgjsTspan4640" style="text-decoration:;">bytes_read_ </tspan></tspan><tspan id="SvgjsTspan4641" dy="16" x="290.5"><tspan id="SvgjsTspan4642" style="text-decoration:;">+= static_cast&lt;uint64_t&gt;(nread); </tspan></tspan><tspan id="SvgjsTspan4643" dy="16" x="290.5"><tspan id="SvgjsTspan4644" style="text-decoration:;"> </tspan></tspan><tspan id="SvgjsTspan4645" dy="16" x="290.5"><tspan id="SvgjsTspan4646" style="text-decoration:;">listener_-&gt;OnStreamRead(nread, buf);};(509)</tspan></tspan></text></g></g><g id="SvgjsG4647" transform="translate(2529.556030306664,2163.171875)"><path id="SvgjsPath4648" d="M0 301.25Q9 301.25 9 292.25L9 159.625Q9 150.625 22 150.625Q9 150.625 9 141.625L9 9Q9 0 0 0 " stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath4649" d="M0 0L129.40988991477025 0L129.40988991477025 301.25L0 301.25Z " stroke="none" fill="none"></path><g id="SvgjsG4650"><text id="SvgjsText4651" font-family="微软雅黑" text-anchor="start" font-size="13px" width="101" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="132.675" transform="rotate(0)"><tspan id="SvgjsTspan4652" dy="16" x="27"><tspan id="SvgjsTspan4653" style="text-decoration:;fill: rgb(255, 51, 51);">/src/stream_bas</tspan></tspan><tspan id="SvgjsTspan4654" dy="16" x="27"><tspan id="SvgjsTspan4655" style="text-decoration:;fill: rgb(255, 51, 51);">e-inl.h</tspan></tspan></text></g></g><g id="SvgjsG4656"><path id="SvgjsPath4657" d="M2375.1875 2117.15625L2375.1875 2141.8828125L2224.509557274562 2141.8828125L2224.509557274562 2166.609375 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4658)"></path></g><g id="SvgjsG4660" transform="translate(2536.264939834663,2496.921875)"><path id="SvgjsPath4661" d="M0 550Q9 550 9 541L9 284Q9 275 22 275Q9 275 9 266L9 9Q9 0 0 0 " stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath4662" d="M0 0L112.04756016533702 0L112.04756016533702 550L0 550Z " stroke="none" fill="none"></path><g id="SvgjsG4663"><text id="SvgjsText4664" font-family="微软雅黑" text-anchor="start" font-size="13px" width="84" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="257.05" transform="rotate(0)"><tspan id="SvgjsTspan4665" dy="16" x="27"><tspan id="SvgjsTspan4666" style="text-decoration:;fill: rgb(255, 51, 51);">/src/node_htt</tspan></tspan><tspan id="SvgjsTspan4667" dy="16" x="27"><tspan id="SvgjsTspan4668" style="text-decoration:;fill: rgb(255, 51, 51);">p_parser.cc</tspan></tspan></text></g></g><g id="SvgjsG4669" transform="translate(1925.469601842607,2489.421875)"><path id="SvgjsPath4670" d="M0 0L567.0149975753661 0L567.0149975753661 133.75L0 133.75Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4671"><text id="SvgjsText4672" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="532" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="40.925" transform="rotate(0)"><tspan id="SvgjsTspan4673" dy="16" x="284.5"><tspan id="SvgjsTspan4674" style="text-decoration:;">以http解析器（llhttp）为例，开始调用http解析器void OnStreamRead(ssize_t nread, const </tspan></tspan><tspan id="SvgjsTspan4675" dy="16" x="284.5"><tspan id="SvgjsTspan4676" style="text-decoration:;">uv_buf_t&amp; buf) override {    ...    Local&lt;Value&gt; ret = Execute(buf.base, nread);    ...  };(634)</tspan></tspan></text></g></g><g id="SvgjsG4677" transform="translate(2149.4871505817005,2349.421875)"><path id="SvgjsPath4678" d="M0 40L60 0L120 40L60 80Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4679"><text id="SvgjsText4680" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="90" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="22.45" transform="rotate(0)"><tspan id="SvgjsTspan4681" dy="16" x="60.5"><tspan id="SvgjsTspan4682" style="text-decoration:;">是否通过http.js</tspan></tspan><tspan id="SvgjsTspan4683" dy="16" x="60.5"><tspan id="SvgjsTspan4684" style="text-decoration:;">启动的服务</tspan></tspan></text></g></g><g id="SvgjsG4685"><path id="SvgjsPath4686" d="M2209.4871505817005 2429.421875L2209.4871505817005 2459.421875L2208.97710063029 2459.421875L2208.97710063029 2489.421875 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4687)"></path><rect id="SvgjsRect4689" width="128" height="16" x="2145.232125605995" y="2451.421875" fill="#ffffff"></rect><text id="SvgjsText4690" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="128" fill="#323232" font-weight="400" align="top" font-style="" opacity="1" y="2449.471875" transform="rotate(0)"><tspan id="SvgjsTspan4691" dy="16" x="2209.232125605995"><tspan id="SvgjsTspan4692" style="text-decoration:;">是（普通的http服务）</tspan></tspan></text></g><g id="SvgjsG4693"><path id="SvgjsPath4694" d="M2224.5095572745613 2305.671875L2224.5095572745613 2327.546875L2209.4871505817005 2327.546875L2209.4871505817005 2349.421875 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4695)"></path></g><g id="SvgjsG4697" transform="translate(1750.4965738344247,3844.9443359375)"><path id="SvgjsPath4698" d="M0 0L290.3159261655753 0L290.3159261655753 115.7275390625L0 115.7275390625Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4699"><text id="SvgjsText4700" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="254" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="-0.08623046874999996" transform="rotate(0)"><tspan id="SvgjsTspan4701" dy="16" x="146"><tspan id="SvgjsTspan4702" style="text-decoration:;">调用parserOnHeadersComplete；因为是头</tspan></tspan><tspan id="SvgjsTspan4703" dy="16" x="146"><tspan id="SvgjsTspan4704" style="text-decoration:;">部，所以判断是一个新的请求，创建一个请</tspan></tspan><tspan id="SvgjsTspan4705" dy="16" x="146"><tspan id="SvgjsTspan4706" style="text-decoration:;">求：</tspan></tspan><tspan id="SvgjsTspan4707" dy="16" x="146"><tspan id="SvgjsTspan4708" style="text-decoration:;">const incoming = parser.incoming = new </tspan></tspan><tspan id="SvgjsTspan4709" dy="16" x="146"><tspan id="SvgjsTspan4710" style="text-decoration:;">ParserIncomingMessage(socket);（93）</tspan></tspan><tspan id="SvgjsTspan4711" dy="16" x="146"><tspan id="SvgjsTspan4712" style="text-decoration:;">然后调用：</tspan></tspan><tspan id="SvgjsTspan4713" dy="16" x="146"><tspan id="SvgjsTspan4714" style="text-decoration:;">parser.onIncoming（117）</tspan></tspan></text></g></g><g id="SvgjsG4715" transform="translate(2530.1526100852298,3814.421875)"><path id="SvgjsPath4716" d="M0 140Q9 140 9 131L9 79Q9 70 22 70Q9 70 9 61L9 9Q9 0 0 0 " stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath4717" d="M0 0L100 0L100 140L0 140Z " stroke="none" fill="none"></path><g id="SvgjsG4718"><text id="SvgjsText4719" font-family="微软雅黑" text-anchor="start" font-size="13px" width="71" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="52.05" transform="rotate(0)"><tspan id="SvgjsTspan4720" dy="16" x="27"><tspan id="SvgjsTspan4721" style="text-decoration:;fill: rgb(255, 51, 51);">/lib/_http_c</tspan></tspan><tspan id="SvgjsTspan4722" dy="16" x="27"><tspan id="SvgjsTspan4723" style="text-decoration:;fill: rgb(255, 51, 51);">ommon.js</tspan></tspan></text></g></g><g id="SvgjsG4724" transform="translate(2148.97710063029,2663.7552083333303)"><path id="SvgjsPath4725" d="M0 40L60 0L120 40L60 80Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4726"><text id="SvgjsText4727" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="91" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="22.45" transform="rotate(0)"><tspan id="SvgjsTspan4728" dy="16" x="60.5"><tspan id="SvgjsTspan4729" style="text-decoration:;">解析完一段，判</tspan></tspan><tspan id="SvgjsTspan4730" dy="16" x="60.5"><tspan id="SvgjsTspan4731" style="text-decoration:;">断是否为头部</tspan></tspan></text></g></g><g id="SvgjsG4732" transform="translate(2247.0625,3854.875)"><path id="SvgjsPath4733" d="M0 0L261.25 0L261.25 137.046875L0 137.046875Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4734"><text id="SvgjsText4735" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="237" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="26.5734375" transform="rotate(0)"><tspan id="SvgjsTspan4736" dy="16" x="131.5"><tspan id="SvgjsTspan4737" style="text-decoration:;">body数据解析完毕，调用其回调（把解析</tspan></tspan><tspan id="SvgjsTspan4738" dy="16" x="131.5"><tspan id="SvgjsTspan4739" style="text-decoration:;">的数据传过去）：function </tspan></tspan><tspan id="SvgjsTspan4740" dy="16" x="131.5"><tspan id="SvgjsTspan4741" style="text-decoration:;">parserOnBody(b, start, len) {    ...    </tspan></tspan><tspan id="SvgjsTspan4742" dy="16" x="131.5"><tspan id="SvgjsTspan4743" style="text-decoration:;">const ret = stream.push(slice);    ...  }}</tspan></tspan></text></g></g><g id="SvgjsG4744"><path id="SvgjsPath4745" d="M2208.97710063029 2623.171875L2208.97710063029 2643.463541666665L2208.97710063029 2643.463541666665L2208.97710063029 2663.7552083333303 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4746)"></path></g><g id="SvgjsG4748" transform="translate(1187.8124999999998,5640.921875)"><path id="SvgjsPath4749" d="M0 0L287.0977938595463 0L287.0977938595463 170.9999999999991L0 170.9999999999991Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4750"><text id="SvgjsText4751" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="258" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="35.54999999999954" transform="rotate(0)"><tspan id="SvgjsTspan4752" dy="16" x="144.5"><tspan id="SvgjsTspan4753" style="text-decoration:;">创建完后，触发request事件：</tspan></tspan><tspan id="SvgjsTspan4754" dy="16" x="144.5"><tspan id="SvgjsTspan4755" style="text-decoration:;">function parserOnIncoming(server, socket, </tspan></tspan><tspan id="SvgjsTspan4756" dy="16" x="144.5"><tspan id="SvgjsTspan4757" style="text-decoration:;">state, req, keepAlive) {  ...  </tspan></tspan><tspan id="SvgjsTspan4758" dy="16" x="144.5"><tspan id="SvgjsTspan4759" style="text-decoration:;">state.incoming.push(req);  const res = new </tspan></tspan><tspan id="SvgjsTspan4760" dy="16" x="144.5"><tspan id="SvgjsTspan4761" style="text-decoration:;">server[kServerResponse](req);  ...    </tspan></tspan><tspan id="SvgjsTspan4762" dy="16" x="144.5"><tspan id="SvgjsTspan4763" style="text-decoration:;">server.emit('request', req, res);}（717）</tspan></tspan></text></g></g><g id="SvgjsG4764"><path id="SvgjsPath4765" d="M1895.6545369172122 3960.671875L1895.6545369172122 4800.796875L1331.361396929773 4800.796875L1331.361396929773 5640.921875 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4766)"></path></g><g id="SvgjsG4768" transform="translate(2247.0625,4515.671875)"><path id="SvgjsPath4769" d="M0 0L261.25 0L261.25 87.5L0 87.5Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4770"><text id="SvgjsText4771" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="227" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="17.8" transform="rotate(0)"><tspan id="SvgjsTspan4772" dy="16" x="131.5"><tspan id="SvgjsTspan4773" style="text-decoration:;">调用readableAddChunk：</tspan></tspan><tspan id="SvgjsTspan4774" dy="16" x="131.5"><tspan id="SvgjsTspan4775" style="text-decoration:;">return readableAddChunk(this, chunk, </tspan></tspan><tspan id="SvgjsTspan4776" dy="16" x="131.5"><tspan id="SvgjsTspan4777" style="text-decoration:;">encoding, false); （220）</tspan></tspan></text></g></g><g id="SvgjsG4778" transform="translate(2523.3125,4521.921875)"><path id="SvgjsPath4779" d="M0 616.25Q9 616.25 9 607.25L9 317.125Q9 308.125 22 308.125Q9 308.125 9 299.125L9 9Q9 0 0 0 " stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath4780" d="M0 0L95 0L95 616.25L0 616.25Z " stroke="none" fill="none"></path><g id="SvgjsG4781"><text id="SvgjsText4782" font-family="微软雅黑" text-anchor="start" font-size="13px" width="62" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="290.175" transform="rotate(0)"><tspan id="SvgjsTspan4783" dy="16" x="27"><tspan id="SvgjsTspan4784" style="text-decoration:;fill: rgb(255, 51, 51);">_steam_re</tspan></tspan><tspan id="SvgjsTspan4785" dy="16" x="27"><tspan id="SvgjsTspan4786" style="text-decoration:;fill: rgb(255, 51, 51);">adable.js</tspan></tspan></text></g></g><g id="SvgjsG4787" transform="translate(2317.6875,4649.421875)"><path id="SvgjsPath4788" d="M0 40L60 0L120 40L60 80Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4789"><text id="SvgjsText4790" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="78" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="30.45" transform="rotate(0)"><tspan id="SvgjsTspan4791" dy="16" x="60.5"><tspan id="SvgjsTspan4792" style="text-decoration:;">流是否在流动</tspan></tspan></text></g></g><g id="SvgjsG4793" transform="translate(1952.0625,4778.171875)"><path id="SvgjsPath4794" d="M0 0L271.25 0L271.25 135.3125L0 135.3125Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4795"><text id="SvgjsText4796" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="241" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="41.70625" transform="rotate(0)"><tspan id="SvgjsTspan4797" dy="16" x="136.5"><tspan id="SvgjsTspan4798" style="text-decoration:;">先暂存到readable的buf中（后续会自动消</tspan></tspan><tspan id="SvgjsTspan4799" dy="16" x="136.5"><tspan id="SvgjsTspan4800" style="text-decoration:;">费的）：</tspan></tspan><tspan id="SvgjsTspan4801" dy="16" x="136.5"><tspan id="SvgjsTspan4802" style="text-decoration:;">state.buffer.push(chunk);（312）</tspan></tspan></text></g></g><g id="SvgjsG4803"><path id="SvgjsPath4804" d="M2377.6875 4603.171875L2377.6875 4626.296875L2377.6875 4626.296875L2377.6875 4649.421875 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4805)"></path></g><g id="SvgjsG4807"><path id="SvgjsPath4808" d="M2377.6875 3991.921875L2377.6875 4253.796875L2377.6875 4253.796875L2377.6875 4515.671875 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4809)"></path></g><g id="SvgjsG4811"><path id="SvgjsPath4812" d="M2317.6875 4689.421875L2109.7265625 4689.421875L2109.7265625 4780.588169642857 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4813)"></path><rect id="SvgjsRect4815" width="13" height="16" x="2161.6238839285716" y="4681.421875" fill="#ffffff"></rect><text id="SvgjsText4816" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="13" fill="#323232" font-weight="400" align="top" font-style="" opacity="1" y="4679.471875" transform="rotate(0)"><tspan id="SvgjsTspan4817" dy="16" x="2168.1238839285716"><tspan id="SvgjsTspan4818" style="text-decoration:;">否</tspan></tspan></text></g><g id="SvgjsG4819" transform="translate(2298.909263924803,4778.484375)"><path id="SvgjsPath4820" d="M0 0L215.65323607519713 0L215.65323607519713 134.6875L0 134.6875Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4821"><text id="SvgjsText4822" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="160" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="41.39375" transform="rotate(0)"><tspan id="SvgjsTspan4823" dy="16" x="108.5"><tspan id="SvgjsTspan4824" style="text-decoration:;">直接将数据emit出去：</tspan></tspan><tspan id="SvgjsTspan4825" dy="16" x="108.5"><tspan id="SvgjsTspan4826" style="text-decoration:;">stream.emit('data', chunk);</tspan></tspan><tspan id="SvgjsTspan4827" dy="16" x="108.5"><tspan id="SvgjsTspan4828" style="text-decoration:;">（305）</tspan></tspan></text></g></g><g id="SvgjsG4829"><path id="SvgjsPath4830" d="M2437.6875 4689.421875L2441.779532824621 4689.421875L2441.779532824621 4780.889508928572 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4831)"></path><rect id="SvgjsRect4833" width="13" height="16" x="2435.279532824621" y="4725.109675551976" fill="#ffffff"></rect><text id="SvgjsText4834" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="13" fill="#323232" font-weight="400" align="top" font-style="" opacity="1" y="4723.159675551976" transform="rotate(0)"><tspan id="SvgjsTspan4835" dy="16" x="2441.779532824621"><tspan id="SvgjsTspan4836" style="text-decoration:;">是</tspan></tspan></text></g><g id="SvgjsG4837" transform="translate(2267.0625,3975.671875)"><path id="SvgjsPath4838" d="M14.25 62.12499999999999C-11.875 44.375 4.75 31.062499999999996 10.6875 26.625C8.3125 4.4375 38 0 49.875 8.875C59.375 -4.4375 89.0625 0 89.0625 13.3125C112.8125 8.875 122.3125 26.625 112.8125 48.81250000000001C121.125 66.5625 112.8125 88.75 85.5 79.875C79.5625 91.41250000000001 55.8125 91.41250000000001 49.875 79.875C38 88.75 14.25 84.3125 14.25 62.12499999999999Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4839"><text id="SvgjsText4840" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="91" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="18.425" transform="rotate(0)"><tspan id="SvgjsTspan4841" dy="16" x="60"><tspan id="SvgjsTspan4842" style="text-decoration:;">此stream是js世</tspan></tspan><tspan id="SvgjsTspan4843" dy="16" x="60"><tspan id="SvgjsTspan4844" style="text-decoration:;">界中的readable </tspan></tspan><tspan id="SvgjsTspan4845" dy="16" x="60"><tspan id="SvgjsTspan4846" style="text-decoration:;">stream</tspan></tspan></text></g></g><g id="SvgjsG4847"><path id="SvgjsPath4848" d="M2406.7358819624014 4913.171875L2406.7358819624014 6759.309771825415L1931.1316257188018 6759.309771825415 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4849)"></path><rect id="SvgjsRect4851" width="93" height="16" x="2027.3125" y="6750.921875" fill="#ffffff"></rect><text id="SvgjsText4852" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="93" fill="#323232" font-weight="400" align="top" font-style="" opacity="1" y="6748.971875" transform="rotate(0)"><tspan id="SvgjsTspan4853" dy="16" x="2073.8125"><tspan id="SvgjsTspan4854" style="text-decoration:;">执行on中的函数</tspan></tspan></text></g><g id="SvgjsG4855" transform="translate(2526.732555042615,6592.279017857152)"><path id="SvgjsPath4856" d="M0 140Q9 140 9 131L9 79Q9 70 22 70Q9 70 9 61L9 9Q9 0 0 0 " stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath4857" d="M0 0L100 0L100 140L0 140Z " stroke="none" fill="none"></path><g id="SvgjsG4858"><text id="SvgjsText4859" font-family="微软雅黑" text-anchor="start" font-size="13px" width="53" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="44.05" transform="rotate(0)"><tspan id="SvgjsTspan4860" dy="16" x="27"><tspan id="SvgjsTspan4861" style="text-decoration:;fill: rgb(255, 51, 51);">业务</tspan></tspan><tspan id="SvgjsTspan4862" dy="16" x="27"><tspan id="SvgjsTspan4863" style="text-decoration:;fill: rgb(255, 51, 51);">js：node </tspan></tspan><tspan id="SvgjsTspan4864" dy="16" x="27"><tspan id="SvgjsTspan4865" style="text-decoration:;fill: rgb(255, 51, 51);">xx.js中的</tspan></tspan><tspan id="SvgjsTspan4866" dy="16" x="27"><tspan id="SvgjsTspan4867" style="text-decoration:;fill: rgb(255, 51, 51);">xx.js</tspan></tspan></text></g></g><g id="SvgjsG4868" transform="translate(301.4791666666667,6648.564573688266)"><path id="SvgjsPath4869" d="M80.66145833333314 0L0 42.77934751157645L29.03812499999993 109.6906346450678L132.28479166666634 109.6906346450678L161.3229166666663 42.77934751157645Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4870"><text id="SvgjsText4871" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="117" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="45.12211492091398" transform="rotate(0)"><tspan id="SvgjsTspan4872" dy="16" x="81.5"><tspan id="SvgjsTspan4873" style="text-decoration:;">执行业务逻辑代码：</tspan></tspan><tspan id="SvgjsTspan4874" dy="16" x="81.5"><tspan id="SvgjsTspan4875" style="text-decoration:;">node xx.js中的xx.js</tspan></tspan></text></g></g><g id="SvgjsG4876"><path id="SvgjsPath4877" d="M447.375 633.171875L447.375 3640.868224344133L382.14062499999983 3640.868224344133L382.14062499999983 6648.564573688266 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4878)"></path></g><g id="SvgjsG4880" transform="translate(55.21064814814763,3702.3385416666697)"><path id="SvgjsPath4881" d="M0 0L2728.333333333334 0L2728.333333333334 20L0 20Z " stroke-dasharray="3,4" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#009900"></path><g id="SvgjsG4882"><text id="SvgjsText4883" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="687" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="0.050000000000000044" transform="rotate(0)"><tspan id="SvgjsTspan4884" dy="16" x="1365"><tspan id="SvgjsTspan4885" style="text-decoration:;fill: rgb(255, 255, 255);font-weight: bold;">c++/js分界线，也就是bind发挥作用的地方。这里c++调用js一般通过MakeCallBack的方式（InternalMakeCallBack）</tspan></tspan></text></g></g><g id="SvgjsG4886" transform="translate(553.4791666666667,6639.921875)"><path id="SvgjsPath4887" d="M0 50.61805555555611L105.16666666666663 0L210.33333333333326 50.61805555555611L105.16666666666663 101.23611111111222Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4888"><text id="SvgjsText4889" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="185" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="33.17423611111167" transform="rotate(0)"><tspan id="SvgjsTspan4890" dy="16" x="106"><tspan id="SvgjsTspan4891" style="text-decoration:;">是否使用http解析器</tspan></tspan><tspan id="SvgjsTspan4892" dy="16" x="106"><tspan id="SvgjsTspan4893" style="text-decoration:;">（即是否通过http.js启动服务 ）</tspan></tspan></text></g></g><g id="SvgjsG4894" transform="translate(807.479166666666,5176.921875)"><path id="SvgjsPath4895" d="M0 0L293.33333333333405 0L293.33333333333405 125L0 125Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4896"><text id="SvgjsText4897" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="274" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="36.55" transform="rotate(0)"><tspan id="SvgjsTspan4898" dy="16" x="147.5"><tspan id="SvgjsTspan4899" style="text-decoration:;">调用createServerHandle，创建一个服务实例：</tspan></tspan><tspan id="SvgjsTspan4900" dy="16" x="147.5"><tspan id="SvgjsTspan4901" style="text-decoration:;">handle = new TCP(TCPConstants.SERVER);</tspan></tspan><tspan id="SvgjsTspan4902" dy="16" x="147.5"><tspan id="SvgjsTspan4903" style="text-decoration:;">(1218)</tspan></tspan></text></g></g><g id="SvgjsG4904"><path id="SvgjsPath4905" d="M658.6458333333334 6639.921875L658.6458333333334 6632.851438492082L983.1458333333334 6632.851438492082 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4906)"></path><rect id="SvgjsRect4908" width="13" height="16" x="765.3125" y="6623.921875" fill="#ffffff"></rect><text id="SvgjsText4909" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="13" fill="#323232" font-weight="400" align="top" font-style="" opacity="1" y="6621.971875" transform="rotate(0)"><tspan id="SvgjsTspan4910" dy="16" x="771.8125"><tspan id="SvgjsTspan4911" style="text-decoration:;">否</tspan></tspan></text></g><g id="SvgjsG4912"><path id="SvgjsPath4913" d="M658.6458333333329 6741.157986111112L658.6458333333329 6759.309771825415L1518.2305956648145 6759.309771825415 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4914)"></path><rect id="SvgjsRect4916" width="13" height="16" x="780.3125" y="6750.921875" fill="#ffffff"></rect><text id="SvgjsText4917" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="13" fill="#323232" font-weight="400" align="top" font-style="" opacity="1" y="6748.971875" transform="rotate(0)"><tspan id="SvgjsTspan4918" dy="16" x="786.8125"><tspan id="SvgjsTspan4919" style="text-decoration:;">是</tspan></tspan></text></g><g id="SvgjsG4920"><path id="SvgjsPath4921" d="M462.802083333333 6691.343921199843L508.1406249999999 6691.343921199843L508.1406249999999 6690.539930555556L553.4791666666667 6690.539930555556 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4922)"></path></g><g id="SvgjsG4924" transform="translate(1012.479166666667,3598.151041666667)"><path id="SvgjsPath4925" d="M0 0L263.6979166666663 0L263.6979166666663 90.3333333333344L0 90.3333333333344Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4926"><text id="SvgjsText4927" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="241" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="27.216666666667198" transform="rotate(0)"><tspan id="SvgjsTspan4928" dy="16" x="132.5"><tspan id="SvgjsTspan4929" style="text-decoration:;">调用/src/tcp_wrap.cc的方法，创建tcp实</tspan></tspan><tspan id="SvgjsTspan4930" dy="16" x="132.5"><tspan id="SvgjsTspan4931" style="text-decoration:;">例</tspan></tspan></text></g></g><g id="SvgjsG4932"><path id="SvgjsPath4933" d="M954.145833333333 5176.921875L954.145833333333 4432.703125000001L1144.3281250000002 4432.703125000001L1144.3281250000002 3688.4843750000014 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4934)"></path></g><g id="SvgjsG4936" transform="translate(24.99479166666743,7243.796874999993)"><path id="SvgjsPath4937" d="M0 0L179.33333333333258 0L179.33333333333258 67L0 67Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4938"><text id="SvgjsText4939" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="127" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="23.55" transform="rotate(0)"><tspan id="SvgjsTspan4940" dy="16" x="90.5"><tspan id="SvgjsTspan4941" style="text-decoration:;">author：jimmiezhang</tspan></tspan></text></g></g><g id="SvgjsG4942"><path id="SvgjsPath4943" d="M1218.1458333333333 3688.151041666667L1218.1458333333333 4435.465985082303L1215.6458333333335 4435.465985082303L1215.6458333333335 5182.780928497939 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4944)"></path></g><g id="SvgjsG4946" transform="translate(1113.8125,5180.440393518514)"><path id="SvgjsPath4947" d="M0 0L203.66666666666674 0L203.66666666666674 117.9629629629726L0 117.9629629629726Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4948"><text id="SvgjsText4949" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="182" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="41.031481481486296" transform="rotate(0)"><tspan id="SvgjsTspan4950" dy="16" x="102.5"><tspan id="SvgjsTspan4951" style="text-decoration:;">得到一个tcp实例，把这个tcp实</tspan></tspan><tspan id="SvgjsTspan4952" dy="16" x="102.5"><tspan id="SvgjsTspan4953" style="text-decoration:;">例保存为handle</tspan></tspan></text></g></g><g id="SvgjsG4954"><path id="SvgjsPath4955" d="M1317.4791666666667 5239.421874999999L1331.3790089862323 5239.421874999999L1331.3790089862323 5238.290393518513L1345.278851305798 5238.290393518513 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker4956)"></path></g><g id="SvgjsG4958" transform="translate(1345.278851305798,5180.440393518514)"><path id="SvgjsPath4959" d="M155.83333333333337 0L0 57.850000000000236L56.10000000000001 148.33333333333394L255.56666666666672 148.33333333333394L311.66666666666674 57.850000000000236Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4960"><text id="SvgjsText4961" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="270" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="51.34166666666701" transform="rotate(0)"><tspan id="SvgjsTspan4962" dy="16" x="156.5"><tspan id="SvgjsTspan4963" style="text-decoration:;">net.js中封装一个onconnection函数，保存到这</tspan></tspan><tspan id="SvgjsTspan4964" dy="16" x="156.5"><tspan id="SvgjsTspan4965" style="text-decoration:;">个handle的onconnection上：</tspan></tspan><tspan id="SvgjsTspan4966" dy="16" x="156.5"><tspan id="SvgjsTspan4967" style="text-decoration:;">this._handle.onconnection = onconnection;</tspan></tspan><tspan id="SvgjsTspan4968" dy="16" x="156.5"><tspan id="SvgjsTspan4969" style="text-decoration:;">(1285)</tspan></tspan></text></g></g><g id="SvgjsG4970" transform="translate(1799.7383839292036,4961.921875)"><path id="SvgjsPath4971" d="M0 0L155.87476393286943 0L155.87476393286943 107.5L0 107.5Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG4972"><text id="SvgjsText4973" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="131" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="27.8" transform="rotate(0)"><tspan id="SvgjsTspan4974" dy="16" x="78.5"><tspan id="SvgjsTspan4975" style="text-decoration:;">readable stream的on</tspan></tspan><tspan id="SvgjsTspan4976" dy="16" x="78.5"><tspan id="SvgjsTspan4977" style="text-decoration:;">方法，调用resume：</tspan></tspan><tspan id="SvgjsTspan4978" dy="16" x="78.5"><tspan id="SvgjsTspan4979" style="text-decoration:;">this.resume();（865）</tspan></tspan></text></g></g><g id="SvgjsG4980" transform="translate(58.997685185184835,6560.625578703718)"><path id="SvgjsPath4981" d="M0 0L2715.1481481481487 0L2715.1481481481487 20L0 20Z " stroke-dasharray="3,4" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#66ff66"></path><g id="SvgjsG4982"><text id="SvgjsText4983" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="138" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="0.050000000000000044" transform="rotate(0)"><tspan id="SvgjsTspan4984" dy="16" x="1358.5"><tspan id="SvgjsTspan4985" style="text-decoration:;caret-color: rgb(255, 255, 255);font-weight: bold;fill: rgb(255, 0, 0);">native js/业务js 分界钱</tspan></tspan></text></g></g><g id="SvgjsG4986" transform="translate(2530.344884792048,5180.440393518514)"><path id="SvgjsPath4987" d="M0 316.4814814814863Q9 316.4814814814863 9 307.4814814814863L9 167.24074074074315Q9 158.24074074074315 22 158.24074074074315Q9 158.24074074074315 9 149.24074074074315L9 9Q9 0 0 0 " stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath4988" d="M0 0L96.38767025056677 0L96.38767025056677 316.4814814814863L0 316.4814814814863Z " stroke="none" fill="none"></path><g id="SvgjsG4989"><text id="SvgjsText4990" font-family="微软雅黑" text-anchor="start" font-size="13px" width="33" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="148.29074074074316" transform="rotate(0)"><tspan id="SvgjsTspan4991" dy="16" x="27"><tspan id="SvgjsTspan4992" style="text-decoration:;fill: rgb(255, 51, 51);">net.js</tspan></tspan></text></g></g><g id="SvgjsG4993" transform="translate(2534.9436816077464,3593.171875)"><path id="SvgjsPath4994" d="M0 81.25Q9 81.25 9 73.125L9 48.75Q9 40.625 22 40.625Q9 40.625 9 32.5L9 8.125Q9 0 0 0 " stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath4995" d="M0 0L160.86881839225362 0L160.86881839225362 81.25L0 81.25Z " stroke="none" fill="none"></path><g id="SvgjsG4996"><text id="SvgjsText4997" font-family="微软雅黑" text-anchor="start" font-size="13px" width="104" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="30.675" transform="rotate(0)"><tspan id="SvgjsTspan4998" dy="16" x="27"><tspan id="SvgjsTspan4999" style="text-decoration:;fill: rgb(255, 51, 51);">/src/tcp_wrap.cc</tspan></tspan></text></g></g><g id="SvgjsG5000" transform="translate(767.4791666666667,5328.773726851848)"><path id="SvgjsPath5001" d="M0 0L373.3333333333326 0L373.3333333333326 146.99276620370802L0 146.99276620370802Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5002"><text id="SvgjsText5003" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="344" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="-0.45361689814599226" transform="rotate(0)"><tspan id="SvgjsTspan5004" dy="16" x="187.5"><tspan id="SvgjsTspan5005" style="text-decoration:;">以net.js为例，创建一个server实例，注册一个connection事</tspan></tspan><tspan id="SvgjsTspan5006" dy="16" x="187.5"><tspan id="SvgjsTspan5007" style="text-decoration:;">件：</tspan></tspan><tspan id="SvgjsTspan5008" dy="16" x="187.5"><tspan id="SvgjsTspan5009" style="text-decoration:;">function Server(options, connectionListener) {</tspan></tspan><tspan id="SvgjsTspan5010" dy="16" x="187.5"><tspan id="SvgjsTspan5011" style="text-decoration:;">...</tspan></tspan><tspan id="SvgjsTspan5012" dy="16" x="187.5"><tspan id="SvgjsTspan5013" style="text-decoration:;">    if(xx){</tspan></tspan><tspan id="SvgjsTspan5014" dy="16" x="187.5"><tspan id="SvgjsTspan5015" style="text-decoration:;">this.on('connection', connectionListener);</tspan></tspan><tspan id="SvgjsTspan5016" dy="16" x="187.5"><tspan id="SvgjsTspan5017" style="text-decoration:;">...</tspan></tspan><tspan id="SvgjsTspan5018" dy="16" x="187.5"><tspan id="SvgjsTspan5019" style="text-decoration:;font-size: inherit;">};(1136)</tspan></tspan><tspan id="SvgjsTspan5020" dy="16" x="187.5"><tspan id="SvgjsTspan5021" style="text-decoration:;"> </tspan></tspan></text></g></g><g id="SvgjsG5022"><path id="SvgjsPath5023" d="M954.1458333333328 5328.773726851848L954.1458333333328 5315.347800925923L954.145833333333 5315.347800925923L954.145833333333 5301.921875 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5024)"></path></g><g id="SvgjsG5026" transform="translate(983.1458333333334,6592.279017857152)"><path id="SvgjsPath5027" d="M0 0L276.66666666666663 0L276.66666666666663 81.14484126985917L0 81.14484126985917Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5028"><text id="SvgjsText5029" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="254" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="14.622420634929586" transform="rotate(0)"><tspan id="SvgjsTspan5030" dy="16" x="139"><tspan id="SvgjsTspan5031" style="text-decoration:;">将业务代码net.createServer((socket) =&gt; {})</tspan></tspan><tspan id="SvgjsTspan5032" dy="16" x="139"><tspan id="SvgjsTspan5033" style="text-decoration:;">中的函数作为参数，调用net.js中的</tspan></tspan><tspan id="SvgjsTspan5034" dy="16" x="139"><tspan id="SvgjsTspan5035" style="text-decoration:;">createServer方法</tspan></tspan></text></g></g><g id="SvgjsG5036"><path id="SvgjsPath5037" d="M995.8124999999998 6593.921874999998L995.8124999999998 6034.844184027777L954.145833333333 6034.844184027777L954.145833333333 5475.766493055556 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5038)"></path></g><g id="SvgjsG5040" transform="translate(1217.1458333333335,6632.851438492082)"><path id="SvgjsPath5041" d="M10.799999999999999 49C-9 35 3.6 24.5 8.1 21C6.300000000000001 3.5 28.8 0 37.8 7C45 -3.5 67.5 0 67.5 10.5C85.5 7 92.7 21 85.5 38.5C91.8 52.5 85.5 70 64.8 63C60.300000000000004 72.10000000000001 42.3 72.10000000000001 37.8 63C28.8 70 10.799999999999999 66.5 10.799999999999999 49Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5042"><text id="SvgjsText5043" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="65" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="1.05" transform="rotate(0)"><tspan id="SvgjsTspan5044" dy="16" x="45.5"><tspan id="SvgjsTspan5045" style="text-decoration:;">这里就</tspan></tspan><tspan id="SvgjsTspan5046" dy="16" x="45.5"><tspan id="SvgjsTspan5047" style="text-decoration:;">是connecti</tspan></tspan><tspan id="SvgjsTspan5048" dy="16" x="45.5"><tspan id="SvgjsTspan5049" style="text-decoration:;">onLister的</tspan></tspan><tspan id="SvgjsTspan5050" dy="16" x="45.5"><tspan id="SvgjsTspan5051" style="text-decoration:;">源头代码</tspan></tspan></text></g></g><g id="SvgjsG5052"><path id="SvgjsPath5053" d="M1711.1772859188782 5360.671875L1485.494892959439 5360.671875L1485.494892959439 6632.851438492082L1259.8125 6632.851438492082 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5054)"></path><rect id="SvgjsRect5056" width="13" height="16" x="1691.3931662709062" y="5352.671875" fill="#ffffff"></rect><text id="SvgjsText5057" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="13" fill="#323232" font-weight="400" align="top" font-style="" opacity="1" y="5350.721875" transform="rotate(0)"><tspan id="SvgjsTspan5058" dy="16" x="1697.8931662709062"><tspan id="SvgjsTspan5059" style="text-decoration:;">否</tspan></tspan></text></g><g id="SvgjsG5060" transform="translate(2530.344884792048,6196.921875)"><path id="SvgjsPath5061" d="M0 121Q8.093523041590378 121 8.093523041590378 112L8.093523041590378 69.5Q8.093523041590378 60.5 22 60.5Q8.093523041590378 60.5 8.093523041590378 51.5L8.093523041590378 9Q8.093523041590378 0 0 0 " stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath5062" d="M0 0L80.93523041590379 0L80.93523041590379 121L0 121Z " stroke="none" fill="none"></path><g id="SvgjsG5063"><text id="SvgjsText5064" font-family="微软雅黑" text-anchor="start" font-size="13px" width="38" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="50.55" transform="rotate(0)"><tspan id="SvgjsTspan5065" dy="16" x="27"><tspan id="SvgjsTspan5066" style="text-decoration:;fill: rgb(255, 51, 51);font-style: italic;">http.js</tspan></tspan></text></g></g><g id="SvgjsG5067" transform="translate(1518.2305956648145,6702.851438492082)"><path id="SvgjsPath5068" d="M0 0L412.90103005398737 0L412.90103005398737 112.91666666666606L0 112.91666666666606Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5069"><text id="SvgjsText5070" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="378" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="30.50833333333303" transform="rotate(0)"><tspan id="SvgjsTspan5071" dy="16" x="207"><tspan id="SvgjsTspan5072" style="text-decoration:;">将业务代码const server = http.createServer((req, res) =&gt; {  </tspan></tspan><tspan id="SvgjsTspan5073" dy="16" x="207"><tspan id="SvgjsTspan5074" style="text-decoration:;">req.on('data', () =&gt; {})});中的函数作为参数requestListener，传递</tspan></tspan><tspan id="SvgjsTspan5075" dy="16" x="207"><tspan id="SvgjsTspan5076" style="text-decoration:;">到http.js中的Server中</tspan></tspan></text></g></g><g id="SvgjsG5077" transform="translate(1317.0260802420482,6196.380208333337)"><path id="SvgjsPath5078" d="M0 0L245.61015287167675 0L245.61015287167675 76.875L0 76.875Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5079"><text id="SvgjsText5080" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="204" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="12.4875" transform="rotate(0)"><tspan id="SvgjsTspan5081" dy="16" x="123.5"><tspan id="SvgjsTspan5082" style="text-decoration:;">调用_http_server.js中的构建函数：</tspan></tspan><tspan id="SvgjsTspan5083" dy="16" x="123.5"><tspan id="SvgjsTspan5084" style="text-decoration:;">return new Server(opts, </tspan></tspan><tspan id="SvgjsTspan5085" dy="16" x="123.5"><tspan id="SvgjsTspan5086" style="text-decoration:;">requestListener);（42）</tspan></tspan></text></g></g><g id="SvgjsG5087" transform="translate(1896.229560867751,6792.671875000002)"><path id="SvgjsPath5088" d="M10.799999999999999 49C-9 35 3.6 24.5 8.1 21C6.300000000000001 3.5 28.8 0 37.8 7C45 -3.5 67.5 0 67.5 10.5C85.5 7 92.7 21 85.5 38.5C91.8 52.5 85.5 70 64.8 63C60.300000000000004 72.10000000000001 42.3 72.10000000000001 37.8 63C28.8 70 10.799999999999999 66.5 10.799999999999999 49Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5089"><text id="SvgjsText5090" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="69" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="1.05" transform="rotate(0)"><tspan id="SvgjsTspan5091" dy="16" x="45.5"><tspan id="SvgjsTspan5092" style="text-decoration:;">这里就</tspan></tspan><tspan id="SvgjsTspan5093" dy="16" x="45.5"><tspan id="SvgjsTspan5094" style="text-decoration:;">是requestLi</tspan></tspan><tspan id="SvgjsTspan5095" dy="16" x="45.5"><tspan id="SvgjsTspan5096" style="text-decoration:;">ster的源头</tspan></tspan><tspan id="SvgjsTspan5097" dy="16" x="45.5"><tspan id="SvgjsTspan5098" style="text-decoration:;">代码</tspan></tspan></text></g></g><g id="SvgjsG5099"><path id="SvgjsPath5100" d="M1731.8124999999995 6703.921874999998L1731.8124999999995 6488.588541666668L1439.8311566778866 6488.588541666668L1439.8311566778866 6273.255208333337 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5101)"></path></g><g id="SvgjsG5103" transform="translate(2538.8451753699724,5596.207589285714)"><path id="SvgjsPath5104" d="M0 563.1102248600528Q5.839589605859874 563.1102248600528 5.839589605859874 554.1102248600528L5.839589605859874 290.5551124300264Q5.839589605859874 281.5551124300264 22 281.5551124300264Q5.839589605859874 281.5551124300264 5.839589605859874 272.5551124300264L5.839589605859874 9Q5.839589605859874 0 0 0 " stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath5105" d="M0 0L58.39589605859874 0L58.39589605859874 563.1102248600528L0 563.1102248600528Z " stroke="none" fill="none"></path><g id="SvgjsG5106"><text id="SvgjsText5107" font-family="微软雅黑" text-anchor="start" font-size="13px" width="31" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="255.6051124300264" transform="rotate(0)"><tspan id="SvgjsTspan5108" dy="16" x="27"><tspan id="SvgjsTspan5109" style="text-decoration:;fill: rgb(255, 51, 51);font-style: italic;">_http</tspan></tspan><tspan id="SvgjsTspan5110" dy="16" x="27"><tspan id="SvgjsTspan5111" style="text-decoration:;fill: rgb(255, 51, 51);font-style: italic;">_serv</tspan></tspan><tspan id="SvgjsTspan5112" dy="16" x="27"><tspan id="SvgjsTspan5113" style="text-decoration:;fill: rgb(255, 51, 51);font-style: italic;">er.js</tspan></tspan></text></g></g><g id="SvgjsG5114" transform="translate(1017.9840899118835,5894.921875)"><path id="SvgjsPath5115" d="M0 0L236 0L236 69L0 69Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5116"><text id="SvgjsText5117" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="215" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="8.55" transform="rotate(0)"><tspan id="SvgjsTspan5118" dy="16" x="118.5"><tspan id="SvgjsTspan5119" style="text-decoration:;">调用net.js中的函数，创建一个服务：</tspan></tspan><tspan id="SvgjsTspan5120" dy="16" x="118.5"><tspan id="SvgjsTspan5121" style="text-decoration:;">net.Server.call(this, { </tspan></tspan><tspan id="SvgjsTspan5122" dy="16" x="118.5"><tspan id="SvgjsTspan5123" style="text-decoration:;">allowHalfOpen: true });（346）</tspan></tspan></text></g></g><g id="SvgjsG5124"><path id="SvgjsPath5125" d="M1308.3125000000005 6074.421875L1308.3125000000005 6019.171875L1135.9840899118835 6019.171875L1135.9840899118835 5963.921875 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5126)"></path><rect id="SvgjsRect5128" width="5" height="16" x="1219.648294955942" y="6011.171875" fill="#ffffff"></rect><text id="SvgjsText5129" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="5" fill="#323232" font-weight="400" align="top" font-style="" opacity="1" y="6009.221875" transform="rotate(0)"><tspan id="SvgjsTspan5130" dy="16" x="1222.148294955942"><tspan id="SvgjsTspan5131" style="text-decoration:;">1</tspan></tspan></text></g><g id="SvgjsG5132"><path id="SvgjsPath5133" d="M1371.8084651933045 6073.171875L1371.8084651933045 6031.475606282553L1383.7701378262664 6031.475606282553L1383.7701378262664 5989.7793375651045 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5134)"></path><rect id="SvgjsRect5136" width="8" height="16" x="1373.789301509786" y="6023.475606282553" fill="#ffffff"></rect><text id="SvgjsText5137" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="8" fill="#323232" font-weight="400" align="top" font-style="" opacity="1" y="6021.525606282553" transform="rotate(0)"><tspan id="SvgjsTspan5138" dy="16" x="1377.789301509786"><tspan id="SvgjsTspan5139" style="text-decoration:;">2</tspan></tspan></text></g><g id="SvgjsG5140"><path id="SvgjsPath5141" d="M1439.5625000000005 6074.421875L1439.5625000000005 6027.296875L1679.9386514263133 6027.296875L1679.9386514263133 5980.171875 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5142)"></path><rect id="SvgjsRect5144" width="8" height="16" x="1555.7505757131569" y="6019.296875" fill="#ffffff"></rect><text id="SvgjsText5145" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="8" fill="#323232" font-weight="400" align="top" font-style="" opacity="1" y="6017.346875" transform="rotate(0)"><tspan id="SvgjsTspan5146" dy="16" x="1559.7505757131569"><tspan id="SvgjsTspan5147" style="text-decoration:;">3</tspan></tspan></text></g><g id="SvgjsG5148"><path id="SvgjsPath5149" d="M1738.1664334349716 1881.609375L1738.1664334349716 3531.024884259257L1501.1121846391316 3531.024884259257L1501.1121846391316 5180.440393518514 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5150)"></path></g><g id="SvgjsG5152" transform="translate(2530.344884792048,4195.391262755096)"><path id="SvgjsPath5153" d="M0 140Q9 140 9 131L9 79Q9 70 22 70Q9 70 9 61L9 9Q9 0 0 0 " stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath5154" d="M0 0L100 0L100 140L0 140Z " stroke="none" fill="none"></path><g id="SvgjsG5155"><text id="SvgjsText5156" font-family="微软雅黑" text-anchor="start" font-size="13px" width="72" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="36.05" transform="rotate(0)"><tspan id="SvgjsTspan5157" dy="16" x="27"><tspan id="SvgjsTspan5158" style="text-decoration:;fill: rgb(255, 102, 102);">/lib/internal</tspan></tspan><tspan id="SvgjsTspan5159" dy="16" x="27"><tspan id="SvgjsTspan5160" style="text-decoration:;fill: rgb(255, 102, 102);">/stream_ba</tspan></tspan><tspan id="SvgjsTspan5161" dy="16" x="27"><tspan id="SvgjsTspan5162" style="text-decoration:;fill: rgb(255, 102, 102);">se_common</tspan></tspan><tspan id="SvgjsTspan5163" dy="16" x="27"><tspan id="SvgjsTspan5164" style="text-decoration:;fill: rgb(255, 102, 102);">s.js</tspan></tspan></text></g></g><g id="SvgjsG5165" transform="translate(1537.7410714285709,4218.350446428569)"><path id="SvgjsPath5166" d="M0 0L347.5000000000002 0L347.5000000000002 97.50000000000091L0 97.50000000000091Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5167"><text id="SvgjsText5168" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="315" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="22.800000000000455" transform="rotate(0)"><tspan id="SvgjsTspan5169" dy="16" x="174.5"><tspan id="SvgjsTspan5170" style="text-decoration:;">调用steam_base_common中的方法：</tspan></tspan><tspan id="SvgjsTspan5171" dy="16" x="174.5"><tspan id="SvgjsTspan5172" style="text-decoration:;">function onStreamRead(arrayBuffer) {//（168）  ...  </tspan></tspan><tspan id="SvgjsTspan5173" dy="16" x="174.5"><tspan id="SvgjsTspan5174" style="text-decoration:;">result = stream.push(buf);（191）  ...}</tspan></tspan></text></g></g><g id="SvgjsG5175"><path id="SvgjsPath5176" d="M2149.4871505817005 2389.421875L1711.4910714285709 2389.421875L1711.4910714285709 4218.350446428569 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5177)"></path><rect id="SvgjsRect5179" width="299" height="16" x="1715.2896991321663" y="2392.9933035714284" fill="#ffffff"></rect><text id="SvgjsText5180" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="299" fill="#323232" font-weight="400" align="top" font-style="" opacity="1" y="2391.0433035714286" transform="rotate(0)"><tspan id="SvgjsTspan5181" dy="16" x="1864.7896991321663"><tspan id="SvgjsTspan5182" style="text-decoration:;">否（通过net.js启动，自己解析；适用搭建tcp服务）</tspan></tspan></text></g><g id="SvgjsG5183" transform="translate(1720.5348693993224,2753.171875)"><path id="SvgjsPath5184" d="M0 0L415.66645144628137 0L415.66645144628137 187.5L0 187.5Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5185"><text id="SvgjsText5186" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="385" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="19.8" transform="rotate(0)"><tspan id="SvgjsTspan5187" dy="16" x="208.5"><tspan id="SvgjsTspan5188" style="text-decoration:;">llhttp解析完头部后，调用：</tspan></tspan><tspan id="SvgjsTspan5189" dy="16" x="208.5"><tspan id="SvgjsTspan5190" style="text-decoration:;">int on_headers_complete() { //(275)</tspan></tspan><tspan id="SvgjsTspan5191" dy="16" x="208.5"><tspan id="SvgjsTspan5192" style="text-decoration:;">...</tspan></tspan><tspan id="SvgjsTspan5193" dy="16" x="208.5"><tspan id="SvgjsTspan5194" style="text-decoration:;">{      InternalCallbackScope callback_scope(          this, </tspan></tspan><tspan id="SvgjsTspan5195" dy="16" x="208.5"><tspan id="SvgjsTspan5196" style="text-decoration:;">InternalCallbackScope::kSkipTaskQueues);      head_response = </tspan></tspan><tspan id="SvgjsTspan5197" dy="16" x="208.5"><tspan id="SvgjsTspan5198" style="text-decoration:;">cb.As&lt;Function&gt;()-&gt;Call(          env()-&gt;context(), object(), </tspan></tspan><tspan id="SvgjsTspan5199" dy="16" x="208.5"><tspan id="SvgjsTspan5200" style="text-decoration:;">arraysize(argv), argv);      if (head_response.IsEmpty()) </tspan></tspan><tspan id="SvgjsTspan5201" dy="16" x="208.5"><tspan id="SvgjsTspan5202" style="text-decoration:;">callback_scope.MarkAsFailed();    }...</tspan></tspan><tspan id="SvgjsTspan5203" dy="16" x="208.5"><tspan id="SvgjsTspan5204" style="text-decoration:;">}（345)</tspan></tspan></text></g></g><g id="SvgjsG5205"><path id="SvgjsPath5206" d="M2148.97710063029 2703.7552083333303L1928.3680951224628 2703.7552083333303L1928.3680951224628 2753.171875 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5207)"></path><rect id="SvgjsRect5209" width="13" height="16" x="2007.4642645430417" y="2695.7552083333303" fill="#ffffff"></rect><text id="SvgjsText5210" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="13" fill="#323232" font-weight="400" align="top" font-style="" opacity="1" y="2693.8052083333305" transform="rotate(0)"><tspan id="SvgjsTspan5211" dy="16" x="2013.9642645430417"><tspan id="SvgjsTspan5212" style="text-decoration:;">是</tspan></tspan></text></g><g id="SvgjsG5213" transform="translate(2173.3916134705446,2753.171875)"><path id="SvgjsPath5214" d="M0 0L328.6708865294554 0L328.6708865294554 187.5L0 187.5Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5215"><text id="SvgjsText5216" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="307" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="27.8" transform="rotate(0)"><tspan id="SvgjsTspan5217" dy="16" x="165"><tspan id="SvgjsTspan5218" style="text-decoration:;">llhttp解析完body后，调用：</tspan></tspan><tspan id="SvgjsTspan5219" dy="16" x="165"><tspan id="SvgjsTspan5220" style="text-decoration:;">int on_body(const char* at, size_t length) {// (366)</tspan></tspan><tspan id="SvgjsTspan5221" dy="16" x="165"><tspan id="SvgjsTspan5222" style="text-decoration:;">...</tspan></tspan><tspan id="SvgjsTspan5223" dy="16" x="165"><tspan id="SvgjsTspan5224" style="text-decoration:;">MaybeLocal&lt;Value&gt; r = </tspan></tspan><tspan id="SvgjsTspan5225" dy="16" x="165"><tspan id="SvgjsTspan5226" style="text-decoration:;">MakeCallback(cb.As&lt;Function&gt;(),                                       </tspan></tspan><tspan id="SvgjsTspan5227" dy="16" x="165"><tspan id="SvgjsTspan5228" style="text-decoration:;">arraysize(argv),                                       argv);</tspan></tspan><tspan id="SvgjsTspan5229" dy="16" x="165"><tspan id="SvgjsTspan5230" style="text-decoration:;">...</tspan></tspan><tspan id="SvgjsTspan5231" dy="16" x="165"><tspan id="SvgjsTspan5232" style="text-decoration:;">} （390）</tspan></tspan></text></g></g><g id="SvgjsG5233"><path id="SvgjsPath5234" d="M2268.97710063029 2703.7552083333303L2337.7270567352725 2703.7552083333303L2337.7270567352725 2753.171875 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5235)"></path><rect id="SvgjsRect5237" width="13" height="16" x="2321.560412016116" y="2695.7552083333303" fill="#ffffff"></rect><text id="SvgjsText5238" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="13" fill="#323232" font-weight="400" align="top" font-style="" opacity="1" y="2693.8052083333305" transform="rotate(0)"><tspan id="SvgjsTspan5239" dy="16" x="2328.060412016116"><tspan id="SvgjsTspan5240" style="text-decoration:;">否</tspan></tspan></text></g><g id="SvgjsG5241" transform="translate(2290.03125,2980.14453125)"><path id="SvgjsPath5242" d="M0 0L100 0L100 70L0 70Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5243"><text id="SvgjsText5244" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="79" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="17.05" transform="rotate(0)"><tspan id="SvgjsTspan5245" dy="16" x="50.5"><tspan id="SvgjsTspan5246" style="text-decoration:;">MakeCallBac</tspan></tspan><tspan id="SvgjsTspan5247" dy="16" x="50.5"><tspan id="SvgjsTspan5248" style="text-decoration:;">k</tspan></tspan></text></g></g><g id="SvgjsG5249" transform="translate(2245.892387008047,3115.671875)"><path id="SvgjsPath5250" d="M0 0L188.42122467821628 0L188.42122467821628 56.25L0 56.25Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5251"><text id="SvgjsText5252" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="156" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="18.175" transform="rotate(0)"><tspan id="SvgjsTspan5253" dy="16" x="95"><tspan id="SvgjsTspan5254" style="text-decoration:;">InternalMakeCallback(141)</tspan></tspan></text></g></g><g id="SvgjsG5255" transform="translate(2536.264939834663,3106.921875)"><path id="SvgjsPath5256" d="M0 455Q9 455 9 446L9 236.5Q9 227.5 22 227.5Q9 227.5 9 218.5L9 9Q9 0 0 0 " stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath5257" d="M0 0L112.04756016533702 0L112.04756016533702 455L0 455Z " stroke="none" fill="none"></path><g id="SvgjsG5258"><text id="SvgjsText5259" font-family="微软雅黑" text-anchor="start" font-size="13px" width="84" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="209.55" transform="rotate(0)"><tspan id="SvgjsTspan5260" dy="16" x="27"><tspan id="SvgjsTspan5261" style="text-decoration:;fill: rgb(255, 51, 51);">/src/api/callb</tspan></tspan><tspan id="SvgjsTspan5262" dy="16" x="27"><tspan id="SvgjsTspan5263" style="text-decoration:;fill: rgb(255, 51, 51);">ack.cc</tspan></tspan></text></g></g><g id="SvgjsG5264" transform="translate(1980.3473855087364,3223.81640625)"><path id="SvgjsPath5265" d="M0 0L213.65311666782964 0L213.65311666782964 58.75L0 58.75Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5266"><text id="SvgjsText5267" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="114" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="11.425" transform="rotate(0)"><tspan id="SvgjsTspan5268" dy="16" x="107.5"><tspan id="SvgjsTspan5269" style="text-decoration:;">清理task_queue:</tspan></tspan><tspan id="SvgjsTspan5270" dy="16" x="107.5"><tspan id="SvgjsTspan5271" style="text-decoration:;">scope.Close();(175)</tspan></tspan></text></g></g><g id="SvgjsG5272" transform="translate(2224.6753462623774,3225.359375)"><path id="SvgjsPath5273" d="M0 0L305 0L305 56.25L0 56.25Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5274"><text id="SvgjsText5275" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="252" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="2.175" transform="rotate(0)"><tspan id="SvgjsTspan5276" dy="16" x="153"><tspan id="SvgjsTspan5277" style="text-decoration:;">通过以下方式，调用js land中的回调：</tspan></tspan><tspan id="SvgjsTspan5278" dy="16" x="153"><tspan id="SvgjsTspan5279" style="text-decoration:;">ret = callback-&gt;Call(env-&gt;context(), recv, </tspan></tspan><tspan id="SvgjsTspan5280" dy="16" x="153"><tspan id="SvgjsTspan5281" style="text-decoration:;">argc, argv);（162）</tspan></tspan></text></g></g><g id="SvgjsG5282" transform="translate(2263.6527770099024,3048.30859375)"><path id="SvgjsPath5283" d="M0 0L160 0L160 40L0 40Z " stroke="none" fill="none"></path><g id="SvgjsG5284"><text id="SvgjsText5285" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="10.05" transform="rotate(0)"><tspan id="SvgjsTspan5286" dy="16" x="80.5"><tspan id="SvgjsTspan5287" style="text-decoration:;fill: rgb(255, 51, 51);">/src/async_wrap.cc</tspan></tspan></text></g></g><g id="SvgjsG5288"><path id="SvgjsPath5289" d="M2337.7270567352725 2940.671875L2337.7270567352725 2960.408203125L2340.03125 2960.408203125L2340.03125 2980.14453125 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5290)"></path></g><g id="SvgjsG5292"><path id="SvgjsPath5293" d="M2340.03125 3050.14453125L2340.03125 3082.908203125L2340.1029993471557 3082.908203125L2340.1029993471557 3115.671875 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5294)"></path></g><g id="SvgjsG5296"><path id="SvgjsPath5297" d="M2340.1029993471557 3171.921875L2340.1029993471557 3198.640625L2377.1753462623783 3198.640625L2377.1753462623783 3225.359375 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5298)"></path><rect id="SvgjsRect5300" width="5" height="16" x="2356.139172804767" y="3190.640625" fill="#ffffff"></rect><text id="SvgjsText5301" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="5" fill="#323232" font-weight="400" align="top" font-style="" opacity="1" y="3188.690625" transform="rotate(0)"><tspan id="SvgjsTspan5302" dy="16" x="2358.639172804767"><tspan id="SvgjsTspan5303" style="text-decoration:;">1</tspan></tspan></text></g><g id="SvgjsG5304"><path id="SvgjsPath5305" d="M2295.8125 3171.921875L2295.8125 3197.869140625L2087.173943842651 3197.869140625L2087.173943842651 3223.81640625 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5306)"></path><rect id="SvgjsRect5308" width="8" height="16" x="2187.4932219213256" y="3189.869140625" fill="#ffffff"></rect><text id="SvgjsText5309" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="8" fill="#323232" font-weight="400" align="top" font-style="" opacity="1" y="3187.919140625" transform="rotate(0)"><tspan id="SvgjsTspan5310" dy="16" x="2191.4932219213256"><tspan id="SvgjsTspan5311" style="text-decoration:;">2</tspan></tspan></text></g><g id="SvgjsG5312"><path id="SvgjsPath5313" d="M2377.1753462623774 3281.609375L2377.1753462623774 3568.2421875L2377.6875 3568.2421875L2377.6875 3854.875 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5314)"></path></g><g id="SvgjsG5316" transform="translate(1799.7383839292036,3309.421875)"><path id="SvgjsPath5317" d="M0 0L306.6401625282015 0L306.6401625282015 77.5L0 77.5Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5318"><text id="SvgjsText5319" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="259" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="28.8" transform="rotate(0)"><tspan id="SvgjsTspan5320" dy="16" x="154"><tspan id="SvgjsTspan5321" style="text-decoration:;">void InternalCallbackScope::Close() {//(82)</tspan></tspan></text></g></g><g id="SvgjsG5322" transform="translate(1797.03600319538,3408.796875)"><path id="SvgjsPath5323" d="M0 50.9375L156.34847231687525 0L312.6969446337505 50.9375L156.34847231687525 101.875Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5324"><text id="SvgjsText5325" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="274" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="25.496875" transform="rotate(0)"><tspan id="SvgjsTspan5326" dy="16" x="157"><tspan id="SvgjsTspan5327" style="text-decoration:;">是否跳过清理task_queue:</tspan></tspan><tspan id="SvgjsTspan5328" dy="16" x="157"><tspan id="SvgjsTspan5329" style="text-decoration:;">if (env_-&gt;async_callback_scope_depth() &gt; 1 || </tspan></tspan><tspan id="SvgjsTspan5330" dy="16" x="157"><tspan id="SvgjsTspan5331" style="text-decoration:;fill: rgb(255, 51, 51);">skip_task_queues_</tspan><tspan id="SvgjsTspan5332" style="text-decoration:;">) {(100)</tspan></tspan></text></g></g><g id="SvgjsG5333"><path id="SvgjsPath5334" d="M2087.173943842651 3282.56640625L2087.173943842651 3295.994140625L1953.0584651933052 3295.994140625L1953.0584651933052 3309.421875 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5335)"></path></g><g id="SvgjsG5337"><path id="SvgjsPath5338" d="M1953.0584651933052 3386.921875L1953.0584651933052 3397.859375L1953.3844755122554 3397.859375L1953.3844755122554 3408.796875 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5339)"></path></g><g id="SvgjsG5341"><path id="SvgjsPath5342" d="M1807.0625 2940.671875L1807.0625 2970.671875L1720.4965738344247 2970.671875L1720.4965738344247 3902.80810546875L1750.4965738344247 3902.80810546875 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5343)"></path><rect id="SvgjsRect5345" width="5" height="16" x="1795.9059073834424" y="2962.671875" fill="#ffffff"></rect><text id="SvgjsText5346" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="5" fill="#323232" font-weight="400" align="top" font-style="" opacity="1" y="2960.721875" transform="rotate(0)"><tspan id="SvgjsTspan5347" dy="16" x="1798.4059073834424"><tspan id="SvgjsTspan5348" style="text-decoration:;">1</tspan></tspan></text></g><g id="SvgjsG5349"><path id="SvgjsPath5350" d="M1859.5625 2940.671875L1859.5625 3125.671875L1855.7998861445974 3125.671875L1855.7998861445974 3310.671875 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5351)"></path><rect id="SvgjsRect5353" width="8" height="16" x="1855.5625" y="2968.421875" fill="#ffffff"></rect><text id="SvgjsText5354" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="8" fill="#323232" font-weight="400" align="top" font-style="" opacity="1" y="2966.471875" transform="rotate(0)"><tspan id="SvgjsTspan5355" dy="16" x="1859.5625"><tspan id="SvgjsTspan5356" style="text-decoration:;">2</tspan></tspan></text></g><g id="SvgjsG5357" transform="translate(2149.31526859763,3394.34375)"><path id="SvgjsPath5358" d="M0 0L205.1024111398424 0L205.1024111398424 131.328125L0 131.328125Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5359"><text id="SvgjsText5360" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="174" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="-0.28593749999999996" transform="rotate(0)"><tspan id="SvgjsTspan5361" dy="16" x="103.5"><tspan id="SvgjsTspan5362" style="text-decoration:;">调用task_queue.js中的清理函</tspan></tspan><tspan id="SvgjsTspan5363" dy="16" x="103.5"><tspan id="SvgjsTspan5364" style="text-decoration:;">数：</tspan></tspan><tspan id="SvgjsTspan5365" dy="16" x="103.5"><tspan id="SvgjsTspan5366" style="text-decoration:;">Local&lt;Function&gt; tick_callback </tspan></tspan><tspan id="SvgjsTspan5367" dy="16" x="103.5"><tspan id="SvgjsTspan5368" style="text-decoration:;">= env_-</tspan></tspan><tspan id="SvgjsTspan5369" dy="16" x="103.5"><tspan id="SvgjsTspan5370" style="text-decoration:;">&gt;tick_callback_function();</tspan></tspan><tspan id="SvgjsTspan5371" dy="16" x="103.5"><tspan id="SvgjsTspan5372" style="text-decoration:;"> </tspan></tspan><tspan id="SvgjsTspan5373" dy="16" x="103.5"><tspan id="SvgjsTspan5374" style="text-decoration:;">  if (tick_callback-&gt;Call(...))  </tspan></tspan><tspan id="SvgjsTspan5375" dy="16" x="103.5"><tspan id="SvgjsTspan5376" style="text-decoration:;">(130)</tspan></tspan></text></g></g><g id="SvgjsG5377"><path id="SvgjsPath5378" d="M2109.7329478291304 3459.734375L2129.5241082133803 3459.734375L2129.5241082133803 3460.0078125L2149.31526859763 3460.0078125 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5379)"></path><rect id="SvgjsRect5381" width="13" height="16" x="2123.0241082133803" y="3451.87109375" fill="#ffffff"></rect><text id="SvgjsText5382" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="13" fill="#323232" font-weight="400" align="top" font-style="" opacity="1" y="3449.92109375" transform="rotate(0)"><tspan id="SvgjsTspan5383" dy="16" x="2129.5241082133803"><tspan id="SvgjsTspan5384" style="text-decoration:;">否</tspan></tspan></text></g><g id="SvgjsG5385" transform="translate(1738.3125,3503.171875)"><path id="SvgjsPath5386" d="M0 0L100 0L100 70L0 70Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5387"><text id="SvgjsText5388" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="21" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="25.05" transform="rotate(0)"><tspan id="SvgjsTspan5389" dy="16" x="50.5"><tspan id="SvgjsTspan5390" style="text-decoration:;">null</tspan></tspan></text></g></g><g id="SvgjsG5391"><path id="SvgjsPath5392" d="M1797.03600319538 3459.734375L1765.8125 3459.734375L1765.8125 3504.421875 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5393)"></path><rect id="SvgjsRect5395" width="13" height="16" x="1759.3125" y="3458.46637340231" fill="#ffffff"></rect><text id="SvgjsText5396" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="13" fill="#323232" font-weight="400" align="top" font-style="" opacity="1" y="3456.5163734023104" transform="rotate(0)"><tspan id="SvgjsTspan5397" dy="16" x="1765.8125"><tspan id="SvgjsTspan5398" style="text-decoration:;">是</tspan></tspan></text></g><g id="SvgjsG5399" transform="translate(2011.9817477876388,3493.171875)"><path id="SvgjsPath5400" d="M23.90774212214048 97.125C-19.92311843511707 69.375 7.969247374046827 48.5625 17.93080659160536 41.625C13.946182904581947 6.9375 63.75397899237461 0 83.67709742749167 13.875C99.61559217558533 -6.9375 149.423388263378 0 149.423388263378 20.8125C189.26962513361212 13.875 205.20811988170578 41.625 189.26962513361212 76.3125C203.2158080381941 104.0625 189.26962513361212 138.75 143.44645273284289 124.875C133.48489351528437 142.9125 93.6386566450502 142.9125 83.67709742749167 124.875C63.75397899237461 138.75 23.90774212214048 131.8125 23.90774212214048 97.125Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5401"><text id="SvgjsText5402" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="179" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="35.425" transform="rotate(0)"><tspan id="SvgjsTspan5403" dy="16" x="100.5"><tspan id="SvgjsTspan5404" style="text-decoration:;">这里的tick_callback就</tspan></tspan><tspan id="SvgjsTspan5405" dy="16" x="100.5"><tspan id="SvgjsTspan5406" style="text-decoration:;">是task_queue.js中设置的：</tspan></tspan><tspan id="SvgjsTspan5407" dy="16" x="100.5"><tspan id="SvgjsTspan5408" style="text-decoration:;">setTickCallback(processTicks</tspan></tspan><tspan id="SvgjsTspan5409" dy="16" x="100.5"><tspan id="SvgjsTspan5410" style="text-decoration:;">AndRejections);（180）</tspan></tspan></text></g></g><g id="SvgjsG5411" transform="translate(2529.6753462623774,6337.2790178571395)"><path id="SvgjsPath5412" d="M0 177.50000000000273Q9 177.50000000000273 9 168.50000000000273L9 97.75000000000136Q9 88.75000000000136 22 88.75000000000136Q9 88.75000000000136 9 79.75000000000136L9 9Q9 0 0 0 " stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath5413" d="M0 0L101.33907705934143 0L101.33907705934143 177.50000000000273L0 177.50000000000273Z " stroke="none" fill="none"></path><g id="SvgjsG5414"><text id="SvgjsText5415" font-family="微软雅黑" text-anchor="start" font-size="13px" width="72" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="62.80000000000136" transform="rotate(0)"><tspan id="SvgjsTspan5416" dy="16" x="27"><tspan id="SvgjsTspan5417" style="text-decoration:;fill: rgb(255, 51, 51);">/lib/internal</tspan></tspan><tspan id="SvgjsTspan5418" dy="16" x="27"><tspan id="SvgjsTspan5419" style="text-decoration:;fill: rgb(255, 51, 51);">/process/ta</tspan></tspan><tspan id="SvgjsTspan5420" dy="16" x="27"><tspan id="SvgjsTspan5421" style="text-decoration:;fill: rgb(255, 51, 51);">sk_queue.js</tspan></tspan></text></g></g><g id="SvgjsG5422" transform="translate(2109.7329478291304,6337.2790178571395)"><path id="SvgjsPath5423" d="M0 0L376.0795521708692 0L376.0795521708692 64.64285714285961L0 64.64285714285961Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5424"><text id="SvgjsText5425" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="257" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="14.371428571429806" transform="rotate(0)"><tspan id="SvgjsTspan5426" dy="16" x="189"><tspan id="SvgjsTspan5427" style="text-decoration:;">调用processTicksAndRejections进行清理：</tspan></tspan><tspan id="SvgjsTspan5428" dy="16" x="189"><tspan id="SvgjsTspan5429" style="text-decoration:;">while (tock = queue.shift()) {（72）</tspan></tspan></text></g></g><g id="SvgjsG5430"><path id="SvgjsPath5431" d="M2233.3125 3525.671875L2233.3125 4931.47544642857L2297.772723914565 4931.47544642857L2297.772723914565 6337.2790178571395 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5432)"></path></g><g id="SvgjsG5434" transform="translate(2129.5646925290794,6461.921874999999)"><path id="SvgjsPath5435" d="M0 0L336.4160627709716 0L336.4160627709716 55.918367346939704L0 55.918367346939704Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5436"><text id="SvgjsText5437" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="229" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="10.009183673469852" transform="rotate(0)"><tspan id="SvgjsTspan5438" dy="16" x="169"><tspan id="SvgjsTspan5439" style="text-decoration:;">清理完tick的queue后，清理microTask:</tspan></tspan><tspan id="SvgjsTspan5440" dy="16" x="169"><tspan id="SvgjsTspan5441" style="text-decoration:;">runMicrotasks(); (97)</tspan></tspan></text></g></g><g id="SvgjsG5442"><path id="SvgjsPath5443" d="M2297.772723914565 6401.921874999999L2297.772723914565 6431.921874999999L2297.772723914565 6431.921874999999L2297.772723914565 6461.921874999999 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5444)"></path></g><g id="SvgjsG5446" transform="translate(2035.8125,6491.207589285714)"><path id="SvgjsPath5447" d="M17.57142857142853 49.49999999999972C-14.64285714285711 35.35714285714266 5.857142857142844 24.74999999999986 13.178571428571399 21.214285714285598C10.249999999999979 3.5357142857142665 46.857142857142755 0 61.49999999999986 7.071428571428533C73.21428571428555 -3.5357142857142665 109.82142857142833 0 109.82142857142833 10.607142857142799C139.10714285714255 7.071428571428533 150.82142857142824 21.214285714285598 139.10714285714255 38.89285714285693C149.35714285714252 53.03571428571399 139.10714285714255 70.71428571428532 105.42857142857119 63.64285714285679C98.10714285714265 72.83571428571389 68.82142857142841 72.83571428571389 61.49999999999986 63.64285714285679C46.857142857142755 70.71428571428532 17.57142857142853 67.17857142857106 17.57142857142853 49.49999999999972Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5448"><text id="SvgjsText5449" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="121" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="9.407142857142663" transform="rotate(0)"><tspan id="SvgjsTspan5450" dy="16" x="74"><tspan id="SvgjsTspan5451" style="text-decoration:;">runMicroTasks</tspan></tspan><tspan id="SvgjsTspan5452" dy="16" x="74"><tspan id="SvgjsTspan5453" style="text-decoration:;">是node_task_queue.</tspan></tspan><tspan id="SvgjsTspan5454" dy="16" x="74"><tspan id="SvgjsTspan5455" style="text-decoration:;">cc中的函数</tspan></tspan></text></g></g><g id="SvgjsG5456"><path id="SvgjsPath5457" d="M1331.361396929773 5811.921874999999L1331.361396929773 5843.663106282552L1383.7701378262664 5843.663106282552L1383.7701378262664 5875.4043375651045 " stroke-dasharray="3,3" stroke="#ff0000" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5458)"></path></g><g id="SvgjsG5460"><path id="SvgjsPath5461" d="M1894.3839285714284 6703.350446428571L1894.3839285714284 5886.386160714285L1877.6757658956383 5886.386160714285L1877.6757658956383 5069.421875 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5462)"></path><rect id="SvgjsRect5464" width="229" height="16" x="1763.1757658956383" y="5755.841517857142" fill="#ffffff"></rect><text id="SvgjsText5465" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="229" fill="#323232" font-weight="400" align="top" font-style="" opacity="1" y="5753.891517857142" transform="rotate(0)"><tspan id="SvgjsTspan5466" dy="16" x="1877.6757658956383"><tspan id="SvgjsTspan5467" style="text-decoration:;">2.on执行后，在下一个tick中再执行flow</tspan></tspan></text></g><g id="SvgjsG5468"><path id="SvgjsPath5469" d="M1017.9840899118835 5929.421875L979.5625 5929.421875L979.5625 5475.671875 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5470)"></path></g><g id="SvgjsG5472" transform="translate(673.729166666666,5430.671875)"><path id="SvgjsPath5473" d="M18.600000000000094 71.75C-15.50000000000008 51.25 6.200000000000032 35.875 13.95000000000007 30.75C10.850000000000056 5.125 49.60000000000026 0 65.10000000000034 10.25C77.5000000000004 -5.125 116.2500000000006 0 116.2500000000006 15.375C147.25000000000074 10.25 159.65000000000083 30.75 147.25000000000074 56.37500000000001C158.10000000000082 76.875 147.25000000000074 102.5 111.60000000000056 92.25C103.85000000000053 105.575 72.85000000000036 105.575 65.10000000000034 92.25C49.60000000000026 102.5 18.600000000000094 97.375 18.600000000000094 71.75Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5474"><text id="SvgjsText5475" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="121" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="25.3" transform="rotate(0)"><tspan id="SvgjsTspan5476" dy="16" x="78.5"><tspan id="SvgjsTspan5477" style="text-decoration:;">_http_server.js调用</tspan></tspan><tspan id="SvgjsTspan5478" dy="16" x="78.5"><tspan id="SvgjsTspan5479" style="text-decoration:;">时，不会调用这里的</tspan></tspan><tspan id="SvgjsTspan5480" dy="16" x="78.5"><tspan id="SvgjsTspan5481" style="text-decoration:;">this.on('connection' </tspan></tspan></text></g></g><g id="SvgjsG5482"><path id="SvgjsPath5483" d="M1711.1772859188782 5360.671875L1425.369892959439 5360.671875L1425.369892959439 5360.671875L1139.5625 5360.671875 " stroke-dasharray="3,3" stroke="#ff0000" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5484)"></path></g><g id="SvgjsG5486" transform="translate(1277.1451378262664,5875.4043375651045)"><path id="SvgjsPath5487" d="M106.625 0L0 44.60625L38.385 114.375L174.86499999999998 114.375L213.25 44.60625Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5488"><text id="SvgjsText5489" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="193" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="39.815625" transform="rotate(0)"><tspan id="SvgjsTspan5490" dy="16" x="107.5"><tspan id="SvgjsTspan5491" style="text-decoration:;">将请求回调放在刚刚创建的server</tspan></tspan><tspan id="SvgjsTspan5492" dy="16" x="107.5"><tspan id="SvgjsTspan5493" style="text-decoration:;">上：this.on('request', </tspan></tspan><tspan id="SvgjsTspan5494" dy="16" x="107.5"><tspan id="SvgjsTspan5495" style="text-decoration:;">requestListener);（348）</tspan></tspan></text></g></g><g id="SvgjsG5496" transform="translate(1554.383928571429,5866.611545138888)"><path id="SvgjsPath5497" d="M125.55472285488463 0L0 44.28852864583377L45.19970022775846 113.56032986111222L205.90974548201078 113.56032986111222L251.10944570976926 44.28852864583377Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5498"><text id="SvgjsText5499" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="230" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="31.347189670139525" transform="rotate(0)"><tspan id="SvgjsTspan5500" dy="16" x="126.5"><tspan id="SvgjsTspan5501" style="text-decoration:;">_http_server.js封装了一个客户端连接回</tspan></tspan><tspan id="SvgjsTspan5502" dy="16" x="126.5"><tspan id="SvgjsTspan5503" style="text-decoration:;">调函数，放在刚刚创建的server</tspan></tspan><tspan id="SvgjsTspan5504" dy="16" x="126.5"><tspan id="SvgjsTspan5505" style="text-decoration:;">上：this.on('connection', </tspan></tspan><tspan id="SvgjsTspan5506" dy="16" x="126.5"><tspan id="SvgjsTspan5507" style="text-decoration:;">connectionListener);（357）</tspan></tspan></text></g></g><g id="SvgjsG5508"><path id="SvgjsPath5509" d="M1831.1772859188782 5360.671875L1906.3225115936982 5360.671875L1906.3225115936982 5952.296875L1981.4677372685182 5952.296875 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5510)"></path><rect id="SvgjsRect5512" width="13" height="16" x="1845.220853621324" y="5352.671875" fill="#ffffff"></rect><text id="SvgjsText5513" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="13" fill="#323232" font-weight="400" align="top" font-style="" opacity="1" y="5350.721875" transform="rotate(0)"><tspan id="SvgjsTspan5514" dy="16" x="1851.720853621324"><tspan id="SvgjsTspan5515" style="text-decoration:;">是</tspan></tspan></text></g><g id="SvgjsG5516" transform="translate(1916.5516998021576,5769.524856090546)"><path id="SvgjsPath5517" d="M0 0L143.96725122235398 0L143.96725122235398 87.432861328125L0 87.432861328125Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5518"><text id="SvgjsText5519" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="123" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="1.7664306640625" transform="rotate(0)"><tspan id="SvgjsTspan5520" dy="16" x="72.5"><tspan id="SvgjsTspan5521" style="text-decoration:;"> </tspan></tspan><tspan id="SvgjsTspan5522" dy="16" x="72.5"><tspan id="SvgjsTspan5523" style="text-decoration:;">从parsers池子中取一</tspan></tspan><tspan id="SvgjsTspan5524" dy="16" x="72.5"><tspan id="SvgjsTspan5525" style="text-decoration:;">个</tspan></tspan><tspan id="SvgjsTspan5526" dy="16" x="72.5"><tspan id="SvgjsTspan5527" style="text-decoration:;">const parser = </tspan></tspan><tspan id="SvgjsTspan5528" dy="16" x="72.5"><tspan id="SvgjsTspan5529" style="text-decoration:;">parsers.alloc();(418)</tspan></tspan></text></g></g><g id="SvgjsG5530"><path id="SvgjsPath5531" d="M1522.1324055994708 3933.824951171875L1522.1324055994708 4851.67490363121L1988.5353254133347 4851.67490363121L1988.5353254133347 5769.524856090546 " stroke-dasharray="3,3" stroke="#ff3333" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5532)"></path></g><g id="SvgjsG5534" transform="translate(1367.4905812523698,3843.824951171875)"><path id="SvgjsPath5535" d="M0 0L309.28364869420193 0L309.28364869420193 90L0 90Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5536"><text id="SvgjsText5537" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="283" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="19.05" transform="rotate(0)"><tspan id="SvgjsTspan5538" dy="16" x="155.5"><tspan id="SvgjsTspan5539" style="text-decoration:;">进程启动时分配个池子中parsers：const parsers </tspan></tspan><tspan id="SvgjsTspan5540" dy="16" x="155.5"><tspan id="SvgjsTspan5541" style="text-decoration:;">= new FreeList('parsers', 1000, function </tspan></tspan><tspan id="SvgjsTspan5542" dy="16" x="155.5"><tspan id="SvgjsTspan5543" style="text-decoration:;">parsersCb() {//(159);</tspan></tspan></text></g></g><g id="SvgjsG5544" transform="translate(1981.4677372685182,5919.171875)"><path id="SvgjsPath5545" d="M0 0L297.1354166666665 0L297.1354166666665 66.25L0 66.25Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5546"><text id="SvgjsText5547" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="248" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="15.175" transform="rotate(0)"><tspan id="SvgjsTspan5548" dy="16" x="149.5"><tspan id="SvgjsTspan5549" style="text-decoration:;">connectionListener调</tspan></tspan><tspan id="SvgjsTspan5550" dy="16" x="149.5"><tspan id="SvgjsTspan5551" style="text-decoration:;">用connectionListenerInternal函数（404）</tspan></tspan></text></g></g><g id="SvgjsG5552"><path id="SvgjsPath5553" d="M2051.5625 5920.421875L2051.5625 5888.689796209335L1988.5353254133347 5888.689796209335L1988.5353254133347 5856.957717418671 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5554)"></path></g><g id="SvgjsG5556" transform="translate(2350.675638313625,5776.794023036957)"><path id="SvgjsPath5557" d="M0 0L143.96725122235398 0L143.96725122235398 87.432861328125L0 87.432861328125Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5558"><text id="SvgjsText5559" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="121" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="9.7664306640625" transform="rotate(0)"><tspan id="SvgjsTspan5560" dy="16" x="72.5"><tspan id="SvgjsTspan5561" style="text-decoration:;">将此parser赋值给</tspan></tspan><tspan id="SvgjsTspan5562" dy="16" x="72.5"><tspan id="SvgjsTspan5563" style="text-decoration:;">listener_:</tspan></tspan><tspan id="SvgjsTspan5564" dy="16" x="72.5"><tspan id="SvgjsTspan5565" style="text-decoration:;">parser.consume(soc</tspan></tspan><tspan id="SvgjsTspan5566" dy="16" x="72.5"><tspan id="SvgjsTspan5567" style="text-decoration:;">ket._handle); (478)</tspan></tspan></text></g></g><g id="SvgjsG5568" transform="translate(2068.8125,5771.849032402039)"><path id="SvgjsPath5569" d="M0 0L246.25 0L246.25 95L0 95Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5570"><text id="SvgjsText5571" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="206" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="13.55" transform="rotate(0)"><tspan id="SvgjsTspan5572" dy="16" x="124"><tspan id="SvgjsTspan5573" style="text-decoration:;">将req到来的回调设置在parser上：</tspan></tspan><tspan id="SvgjsTspan5574" dy="16" x="124"><tspan id="SvgjsTspan5575" style="text-decoration:;">parser.onIncoming = </tspan></tspan><tspan id="SvgjsTspan5576" dy="16" x="124"><tspan id="SvgjsTspan5577" style="text-decoration:;">parserOnIncoming.bind(undefined, </tspan></tspan><tspan id="SvgjsTspan5578" dy="16" x="124"><tspan id="SvgjsTspan5579" style="text-decoration:;">server, socket, state);（462）</tspan></tspan></text></g></g><g id="SvgjsG5580"><path id="SvgjsPath5581" d="M2130.0354456018513 5919.171875L2130.0354456018513 5893.010453701019L2191.9375 5893.010453701019L2191.9375 5866.849032402039 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5582)"></path></g><g id="SvgjsG5584"><path id="SvgjsPath5585" d="M2243.8124999999995 5919.921874999999L2243.8124999999995 5892.074379682541L2422.6592639248015 5892.074379682541L2422.6592639248015 5864.226884365082 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5586)"></path></g><g id="SvgjsG5588"><path id="SvgjsPath5589" d="M2422.659263924802 5776.794023036957L2422.659263924802 4342.482949018478L1494.125487684045 4342.482949018478L1494.125487684045 2908.171875 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5590)"></path></g><g id="SvgjsG5592" transform="translate(1257.5096429539676,2315.125)"><path id="SvgjsPath5593" d="M0 0L396.72095982300925 0L396.72095982300925 111.5625L0 111.5625Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5594"><text id="SvgjsText5595" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="330" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="29.83125" transform="rotate(0)"><tspan id="SvgjsTspan5596" dy="16" x="199"><tspan id="SvgjsTspan5597" style="text-decoration:;">将传进来的parser赋值给listener_:void </tspan></tspan><tspan id="SvgjsTspan5598" dy="16" x="199"><tspan id="SvgjsTspan5599" style="text-decoration:;">StreamResource::PushStreamListener(StreamListener* </tspan></tspan><tspan id="SvgjsTspan5600" dy="16" x="199"><tspan id="SvgjsTspan5601" style="text-decoration:;">listener) { ....  listener_ = listener;}(58)</tspan></tspan></text></g></g><g id="SvgjsG5602" transform="translate(1334.5625,2785.671875)"><path id="SvgjsPath5603" d="M0 0L319.12597536809017 0L319.12597536809017 122.5L0 122.5Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5604"><text id="SvgjsText5605" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="284" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="19.3" transform="rotate(0)"><tspan id="SvgjsTspan5606" dy="16" x="160.5"><tspan id="SvgjsTspan5607" style="text-decoration:;">调用PushStreamListener，将parser传进去static </tspan></tspan><tspan id="SvgjsTspan5608" dy="16" x="160.5"><tspan id="SvgjsTspan5609" style="text-decoration:;">void Consume(const </tspan></tspan><tspan id="SvgjsTspan5610" dy="16" x="160.5"><tspan id="SvgjsTspan5611" style="text-decoration:;">FunctionCallbackInfo&lt;Value&gt;&amp; args) {    Parser* </tspan></tspan><tspan id="SvgjsTspan5612" dy="16" x="160.5"><tspan id="SvgjsTspan5613" style="text-decoration:;">parser;    ...    stream-</tspan></tspan><tspan id="SvgjsTspan5614" dy="16" x="160.5"><tspan id="SvgjsTspan5615" style="text-decoration:;">&gt;PushStreamListener(parser);  }（582）</tspan></tspan></text></g></g><g id="SvgjsG5616"><path id="SvgjsPath5617" d="M1494.125487684045 2785.671875L1494.125487684045 2606.1796875L1455.8701228654722 2606.1796875L1455.8701228654722 2426.6875 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5618)"></path></g><g id="SvgjsG5620"><path id="SvgjsPath5621" d="M1654.2306027769769 2370.90625L1930.6465513884884 2370.90625L1930.6465513884884 2445.671875L2207.0625 2445.671875 " stroke-dasharray="3,3" stroke="#ff0000" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5622)"></path><rect id="SvgjsRect5624" width="167" height="16" x="1957.7129308330932" y="2437.671875" fill="#ffffff"></rect><text id="SvgjsText5625" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="167" fill="#323232" font-weight="400" align="top" font-style="" opacity="1" y="2435.721875" transform="rotate(0)"><tspan id="SvgjsTspan5626" dy="16" x="2041.2129308330932"><tspan id="SvgjsTspan5627" style="text-decoration:;">事先将parser赋值给listener_</tspan></tspan></text></g><g id="SvgjsG5628"><path id="SvgjsPath5629" d="M2315.0624999999995 5819.349032402039L2345.0624999999995 5819.349032402039L2345.0624999999995 3989.421875L1868.3125 3989.421875L1868.3125 3959.421875 " stroke-dasharray="3,3" stroke="#ff0000" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5630)"></path></g><g id="SvgjsG5632"><path id="SvgjsPath5633" d="M2217.8125 3524.921875L2217.8125 5015.671875L1955.613147862073 5015.671875 " stroke-dasharray="3,3" stroke="#0000ff" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5634)"></path><rect id="SvgjsRect5636" width="113" height="16" x="2001.168772646447" y="5008.671875" fill="#ffffff"></rect><text id="SvgjsText5637" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="113" fill="#323232" font-weight="400" align="top" font-style="" opacity="1" y="5006.721875" transform="rotate(0)"><tspan id="SvgjsTspan5638" dy="16" x="2057.668772646447"><tspan id="SvgjsTspan5639" style="text-decoration:;">清理这里设置的tick</tspan></tspan></text></g><g id="SvgjsG5640"><path id="SvgjsPath5641" d="M1501.1121846391316 5180.440393518514L1501.1121846391316 5208.440393518514L1661.8658987348504 5208.440393518514L1661.8658987348504 5207.171875L1666.7862794972361 5207.171875 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5642)"></path></g><g id="SvgjsG5644" transform="translate(1666.7253960678154,5155.921875)"><path id="SvgjsPath5645" d="M0 0L229.7764968046199 0L229.7764968046199 102.5L0 102.5Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5646"><text id="SvgjsText5647" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="209" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="17.3" transform="rotate(0)"><tspan id="SvgjsTspan5648" dy="16" x="115.5"><tspan id="SvgjsTspan5649" style="text-decoration:;">封装一个socket代表客户端实例，触</tspan></tspan><tspan id="SvgjsTspan5650" dy="16" x="115.5"><tspan id="SvgjsTspan5651" style="text-decoration:;">发一个connection事件：</tspan></tspan><tspan id="SvgjsTspan5652" dy="16" x="115.5"><tspan id="SvgjsTspan5653" style="text-decoration:;">self.emit('connection', socket); </tspan></tspan><tspan id="SvgjsTspan5654" dy="16" x="115.5"><tspan id="SvgjsTspan5655" style="text-decoration:;">(1537)</tspan></tspan></text></g></g><g id="SvgjsG5656" transform="translate(1711.1772859188782,5320.671875)"><path id="SvgjsPath5657" d="M0 40L60 0L120 40L60 80Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5658"><text id="SvgjsText5659" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="90" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="22.45" transform="rotate(0)"><tspan id="SvgjsTspan5660" dy="16" x="60.5"><tspan id="SvgjsTspan5661" style="text-decoration:;">是否通过http.js</tspan></tspan><tspan id="SvgjsTspan5662" dy="16" x="60.5"><tspan id="SvgjsTspan5663" style="text-decoration:;">启动的服务</tspan></tspan></text></g></g><g id="SvgjsG5664"><path id="SvgjsPath5665" d="M1781.6136444701253 5258.421875L1781.6136444701253 5289.546875L1771.1772859188782 5289.546875L1771.1772859188782 5320.671875 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5666)"></path></g><g id="SvgjsG5668"><path id="SvgjsPath5669" d="M1831.1772859188782 5360.671875L1861.1772859188782 5360.671875L1861.1772859188782 5836.611545138888L1679.9386514263133 5836.611545138888L1679.9386514263133 5866.611545138888 " stroke-dasharray="3,3" stroke="#ff0000" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5670)"></path></g><g id="SvgjsG5672" transform="translate(1246.4257658956385,6073.171875)"><path id="SvgjsPath5673" d="M0 0L250.76539859533204 0L250.76539859533204 80L0 80Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5674"><text id="SvgjsText5675" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="149" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="14.05" transform="rotate(0)"><tspan id="SvgjsTspan5676" dy="16" x="126"><tspan id="SvgjsTspan5677" style="text-decoration:;">Server构造函数：</tspan></tspan><tspan id="SvgjsTspan5678" dy="16" x="126"><tspan id="SvgjsTspan5679" style="text-decoration:;">function Server(options, </tspan></tspan><tspan id="SvgjsTspan5680" dy="16" x="126"><tspan id="SvgjsTspan5681" style="text-decoration:;">requestListener) （318）</tspan></tspan></text></g></g><g id="SvgjsG5682"><path id="SvgjsPath5683" d="M1439.8311566778866 6196.380208333337L1439.8311566778866 6174.776041666668L1371.8084651933045 6174.776041666668L1371.8084651933045 6153.171875 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5684)"></path></g><g id="SvgjsG5686"><path id="SvgjsPath5687" d="M1474.3839285714284 5759.064732142857L1960.098214285714 5759.064732142857L1960.098214285714 6730.4933035714275L1930.098214285714 6730.4933035714275 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5688)"></path><rect id="SvgjsRect5690" width="129" height="16" x="1895.3125" y="6417.921875" fill="#ffffff"></rect><text id="SvgjsText5691" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="129" fill="#323232" font-weight="400" align="top" font-style="" opacity="1" y="6415.971875" transform="rotate(0)"><tspan id="SvgjsTspan5692" dy="16" x="1959.8125"><tspan id="SvgjsTspan5693" style="text-decoration:;">1.执行requestListener</tspan></tspan></text></g><g id="SvgjsG5694" transform="translate(1472.8125,4954.671875)"><path id="SvgjsPath5695" d="M0 0L292.25230285262705 0L292.25230285262705 122L0 122Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5696"><text id="SvgjsText5697" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="277" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="11.05" transform="rotate(0)"><tspan id="SvgjsTspan5698" dy="16" x="147"><tspan id="SvgjsTspan5699" style="text-decoration:;">设置stream状态的flowing（为true）：</tspan></tspan><tspan id="SvgjsTspan5700" dy="16" x="147"><tspan id="SvgjsTspan5701" style="text-decoration:;">Readable.prototype.resume = function() {  if </tspan></tspan><tspan id="SvgjsTspan5702" dy="16" x="147"><tspan id="SvgjsTspan5703" style="text-decoration:;">(!state.flowing) {</tspan></tspan><tspan id="SvgjsTspan5704" dy="16" x="147"><tspan id="SvgjsTspan5705" style="text-decoration:;">    state.flowing = !state.readableListening;    </tspan></tspan><tspan id="SvgjsTspan5706" dy="16" x="147"><tspan id="SvgjsTspan5707" style="text-decoration:;">resume(this, state);  }</tspan></tspan><tspan id="SvgjsTspan5708" dy="16" x="147"><tspan id="SvgjsTspan5709" style="text-decoration:;">}; (941)</tspan></tspan></text></g></g><g id="SvgjsG5710"><path id="SvgjsPath5711" d="M1799.7383839292036 5015.671875L1782.4015933909154 5015.671875L1782.4015933909154 5015.671875L1765.064802852627 5015.671875 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5712)"></path></g><g id="SvgjsG5714" transform="translate(1179.6884664740446,4958.421875)"><path id="SvgjsPath5715" d="M0 0L258 0L258 111L0 111Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG5716"><text id="SvgjsText5717" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="231" fill="#323232" font-weight="400" align="middle" font-style="" opacity="1" y="21.55" transform="rotate(0)"><tspan id="SvgjsTspan5718" dy="16" x="129.5"><tspan id="SvgjsTspan5719" style="text-decoration:;">在下一个tick中执行：</tspan></tspan><tspan id="SvgjsTspan5720" dy="16" x="129.5"><tspan id="SvgjsTspan5721" style="text-decoration:;">function resume(stream, state) {  ...    </tspan></tspan><tspan id="SvgjsTspan5722" dy="16" x="129.5"><tspan id="SvgjsTspan5723" style="text-decoration:;">process.nextTick(resume_, stream, </tspan></tspan><tspan id="SvgjsTspan5724" dy="16" x="129.5"><tspan id="SvgjsTspan5725" style="text-decoration:;">state);  ...}（955）</tspan></tspan></text></g></g><g id="SvgjsG5726"><path id="SvgjsPath5727" d="M1472.8125 5015.671875L1455.2504832370223 5015.671875L1455.2504832370223 5013.921875L1437.6884664740446 5013.921875 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker5728)"></path></g></svg>